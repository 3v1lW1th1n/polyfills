{"version":3,"file":"custom-style-interface.min.js","sources":["../src/document-wait.js","../src/custom-style-interface.js","../src/common-utils.js","custom-style-interface.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n/** @type {Promise<void>} */\nlet readyPromise = null;\n\n/** @type {?function(function())} */\nlet whenReady = window['HTMLImports'] && window['HTMLImports']['whenReady'] || null;\n\n/** @type {function()} */\nlet resolveFn;\n\n/**\n * @param {function()} callback\n */\nexport default function documentWait(callback) {\n  if (whenReady) {\n    whenReady(callback)\n  } else {\n    if (!readyPromise) {\n      readyPromise = new Promise((resolve) => {resolveFn = resolve});\n      if (document.readyState === 'complete') {\n        resolveFn();\n      } else {\n        document.addEventListener('readystatechange', () => {\n          if (document.readyState === 'complete') {\n            resolveFn();\n          }\n        });\n      }\n    }\n    readyPromise.then(callback);\n  }\n}","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport documentWait from './document-wait'\n\n/**\n * @typedef {HTMLStyleElement | ({getStyle: (function():HTMLStyleElement)})}\n */\nlet CustomStyleProvider; // eslint-disable-line no-unused-vars\n\nconst PROCESSED_MARKER = '__processedByShadyCSS';\nconst SEEN_MARKER = '__seenByShadyCSS';\n\n/** @type {?function(!HTMLStyleElement)} */\nlet transformFn = null;\n\n/** @type {?function()} */\nlet validateFn = null;\n\n/**\nThis interface is provided to add document-level <style> elements to ShadyCSS for processing.\nThese styles must be processed by ShadyCSS to simulate ShadowRoot upper-bound encapsulation from outside styles\nIn addition, these styles may also need to be processed for @apply rules and CSS Custom Properties\n\nTo add document-level styles to ShadyCSS, one can call `ShadyCSS.addDocumentStyle(styleElement)` or `ShadyCSS.addDocumentStyle({getStyle: () => styleElement})`\n\nIn addition, if the process used to discover document-level styles can be synchronously flushed, one should set `ShadyCSS.documentStyleFlush`.\nThis function will be called when calculating styles.\n\nAn example usage of the document-level styling api can be found in `examples/document-style-lib.js`\n\n@unrestricted\n*/\nexport default class CustomStyleInterface {\n  constructor() {\n    /** @type {!Array<!CustomStyleProvider>} */\n    this['customStyles'] = [];\n    this['enqueued'] = false;\n  }\n  /**\n   * Queue a validation for new custom styles to batch style recalculations\n   */\n  enqueueDocumentValidation() {\n    if (this['enqueued']) {\n      return;\n    }\n    this['enqueued'] = true;\n    documentWait(() => {\n      validateFn();\n    });\n  }\n  /**\n   * @param {!HTMLStyleElement} style\n   */\n  addCustomStyle(style) {\n    if (!style[SEEN_MARKER]) {\n      style[SEEN_MARKER] = true;\n      this['customStyles'].push(style);\n      this.enqueueDocumentValidation();\n    }\n  }\n  /**\n   * @param {!CustomStyleProvider} customStyle\n   * @return {HTMLStyleElement}\n   */\n  getStyleForCustomStyle(customStyle) {\n    let style;\n    if (customStyle['getStyle']) {\n      style = customStyle['getStyle']();\n    } else {\n      style = customStyle;\n    }\n    return style;\n  }\n  findStyles() {\n    let cs = this['customStyles'];\n    for (let i = 0; i < cs.length; i++) {\n      let customStyle = cs[i];\n      if (customStyle[PROCESSED_MARKER]) {\n        continue;\n      }\n      let style = this.getStyleForCustomStyle(customStyle);\n      if (style) {\n        customStyle[PROCESSED_MARKER] = true;\n        // HTMLImports polyfill may have cloned the style into the main document,\n        // which is referenced with __appliedElement.\n        // Also, we must copy over the attributes.\n        let appliedStyle = /** @type {HTMLStyleElement} */(style['__appliedElement']);\n        if (appliedStyle) {\n          for (let i = 0; i < style.attributes.length; i++) {\n            let attr = style.attributes[i];\n            appliedStyle.setAttribute(attr.name, attr.value);\n          }\n        }\n        if (transformFn) {\n          transformFn(appliedStyle || style);\n        }\n      }\n    }\n  }\n}\n\nCustomStyleInterface.prototype['addCustomStyle'] = CustomStyleInterface.prototype.addCustomStyle;\nCustomStyleInterface.prototype['getStyleForCustomStyle'] = CustomStyleInterface.prototype.getStyleForCustomStyle;\nCustomStyleInterface.prototype['findStyles'] = CustomStyleInterface.prototype.findStyles;\n\nObject.defineProperties(CustomStyleInterface.prototype, {\n  'transformCallback': {\n    /** @return {?function(!HTMLStyleElement)} */\n    get() {\n      return transformFn;\n    },\n    /** @param {?function(!HTMLStyleElement)} fn */\n    set(fn) {\n      transformFn = fn;\n    }\n  },\n  'validateCallback': {\n    /** @return {?function()} */\n    get() {\n      return validateFn;\n    },\n    /** @param {?function()} fn */\n    set(fn) {\n      validateFn = fn;\n    },\n  }\n})","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n/**\n * @param {Element} element\n * @param {Object=} properties\n */\nexport function updateNativeProperties(element, properties) {\n  // remove previous properties\n  for (let p in properties) {\n    // NOTE: for bc with shim, don't apply null values.\n    if (p === null) {\n      element.style.removeProperty(p);\n    } else {\n      element.style.setProperty(p, properties[p]);\n    }\n  }\n}\n\n/**\n * @param {Element} element\n * @param {string} property\n * @return {string}\n */\nexport function getComputedStyleValue(element, property) {\n  return window.getComputedStyle(element).getPropertyValue(property).trim();\n}","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport CustomStyleInterface from '../src/custom-style-interface'\nimport {getComputedStyleValue, updateNativeProperties} from '../src/common-utils'\n\nconst customStyleInterface = new CustomStyleInterface();\n\nif (!window['ShadyCSS']) {\n  window['ShadyCSS'] = {\n    /**\n     * @param {HTMLTemplateElement} template\n     * @param {string} elementName\n     * @param {string=} elementExtends\n     */\n    ['prepareTemplate'](template, elementName, elementExtends) {}, // eslint-disable-line no-unused-vars\n\n    /**\n     * @param {Element} element\n     * @param {Object=} properties\n     */\n    ['styleSubtree'](element, properties) {\n      customStyleInterface.findStyles();\n      updateNativeProperties(element, properties);\n    },\n\n    /**\n     * @param {Element} element\n     */\n    ['styleElement'](element) { // eslint-disable-line no-unused-vars\n      customStyleInterface.findStyles();\n    },\n\n    /**\n     * @param {Object=} properties\n     */\n    ['styleDocument'](properties) {\n      customStyleInterface.findStyles();\n      updateNativeProperties(document.documentElement, properties);\n    },\n\n    /**\n     * @param {Element} element\n     * @param {string} property\n     * @return {string}\n     */\n    ['getComputedStyleValue'](element, property) {\n      return getComputedStyleValue(element, property);\n    },\n    ['nativeCss']: true,\n    ['nativeShadow']: true\n  }\n}\n\nwindow['ShadyCSS']['CustomStyleInterface'] = customStyleInterface;"],"names":[],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9kZnJlZWRtL3BvbHltZXIvY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvZG9jdW1lbnQtd2FpdC5qcyIsIi9Vc2Vycy9kZnJlZWRtL3BvbHltZXIvY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvY3VzdG9tLXN0eWxlLWludGVyZmFjZS5qcyIsIi9Vc2Vycy9kZnJlZWRtL3BvbHltZXIvY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvY29tbW9uLXV0aWxzLmpzIiwiL1VzZXJzL2RmcmVlZG0vcG9seW1lci9jb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2N1c3RvbS1zdHlsZS1pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHR5cGUge1Byb21pc2U8dm9pZD59ICovXG5sZXQgcmVhZHlQcm9taXNlID0gbnVsbDtcblxuLyoqIEB0eXBlIHs/ZnVuY3Rpb24oZnVuY3Rpb24oKSl9ICovXG5sZXQgd2hlblJlYWR5ID0gd2luZG93WydIVE1MSW1wb3J0cyddICYmIHdpbmRvd1snSFRNTEltcG9ydHMnXVsnd2hlblJlYWR5J10gfHwgbnVsbDtcblxuLyoqIEB0eXBlIHtmdW5jdGlvbigpfSAqL1xubGV0IHJlc29sdmVGbjtcblxuLyoqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRvY3VtZW50V2FpdChjYWxsYmFjaykge1xuICBpZiAod2hlblJlYWR5KSB7XG4gICAgd2hlblJlYWR5KGNhbGxiYWNrKVxuICB9IGVsc2Uge1xuICAgIGlmICghcmVhZHlQcm9taXNlKSB7XG4gICAgICByZWFkeVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge3Jlc29sdmVGbiA9IHJlc29sdmV9KTtcbiAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgIHJlc29sdmVGbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgcmVzb2x2ZUZuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVhZHlQcm9taXNlLnRoZW4oY2FsbGJhY2spO1xuICB9XG59IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgZG9jdW1lbnRXYWl0IGZyb20gJy4vZG9jdW1lbnQtd2FpdCdcblxuLyoqXG4gKiBAdHlwZWRlZiB7SFRNTFN0eWxlRWxlbWVudCB8ICh7Z2V0U3R5bGU6IChmdW5jdGlvbigpOkhUTUxTdHlsZUVsZW1lbnQpfSl9XG4gKi9cbmxldCBDdXN0b21TdHlsZVByb3ZpZGVyOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbmNvbnN0IFBST0NFU1NFRF9NQVJLRVIgPSAnX19wcm9jZXNzZWRCeVNoYWR5Q1NTJztcbmNvbnN0IFNFRU5fTUFSS0VSID0gJ19fc2VlbkJ5U2hhZHlDU1MnO1xuXG4vKiogQHR5cGUgez9mdW5jdGlvbighSFRNTFN0eWxlRWxlbWVudCl9ICovXG5sZXQgdHJhbnNmb3JtRm4gPSBudWxsO1xuXG4vKiogQHR5cGUgez9mdW5jdGlvbigpfSAqL1xubGV0IHZhbGlkYXRlRm4gPSBudWxsO1xuXG4vKipcblRoaXMgaW50ZXJmYWNlIGlzIHByb3ZpZGVkIHRvIGFkZCBkb2N1bWVudC1sZXZlbCA8c3R5bGU+IGVsZW1lbnRzIHRvIFNoYWR5Q1NTIGZvciBwcm9jZXNzaW5nLlxuVGhlc2Ugc3R5bGVzIG11c3QgYmUgcHJvY2Vzc2VkIGJ5IFNoYWR5Q1NTIHRvIHNpbXVsYXRlIFNoYWRvd1Jvb3QgdXBwZXItYm91bmQgZW5jYXBzdWxhdGlvbiBmcm9tIG91dHNpZGUgc3R5bGVzXG5JbiBhZGRpdGlvbiwgdGhlc2Ugc3R5bGVzIG1heSBhbHNvIG5lZWQgdG8gYmUgcHJvY2Vzc2VkIGZvciBAYXBwbHkgcnVsZXMgYW5kIENTUyBDdXN0b20gUHJvcGVydGllc1xuXG5UbyBhZGQgZG9jdW1lbnQtbGV2ZWwgc3R5bGVzIHRvIFNoYWR5Q1NTLCBvbmUgY2FuIGNhbGwgYFNoYWR5Q1NTLmFkZERvY3VtZW50U3R5bGUoc3R5bGVFbGVtZW50KWAgb3IgYFNoYWR5Q1NTLmFkZERvY3VtZW50U3R5bGUoe2dldFN0eWxlOiAoKSA9PiBzdHlsZUVsZW1lbnR9KWBcblxuSW4gYWRkaXRpb24sIGlmIHRoZSBwcm9jZXNzIHVzZWQgdG8gZGlzY292ZXIgZG9jdW1lbnQtbGV2ZWwgc3R5bGVzIGNhbiBiZSBzeW5jaHJvbm91c2x5IGZsdXNoZWQsIG9uZSBzaG91bGQgc2V0IGBTaGFkeUNTUy5kb2N1bWVudFN0eWxlRmx1c2hgLlxuVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuIGNhbGN1bGF0aW5nIHN0eWxlcy5cblxuQW4gZXhhbXBsZSB1c2FnZSBvZiB0aGUgZG9jdW1lbnQtbGV2ZWwgc3R5bGluZyBhcGkgY2FuIGJlIGZvdW5kIGluIGBleGFtcGxlcy9kb2N1bWVudC1zdHlsZS1saWIuanNgXG5cbkB1bnJlc3RyaWN0ZWRcbiovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDdXN0b21TdHlsZUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7IUFycmF5PCFDdXN0b21TdHlsZVByb3ZpZGVyPn0gKi9cbiAgICB0aGlzWydjdXN0b21TdHlsZXMnXSA9IFtdO1xuICAgIHRoaXNbJ2VucXVldWVkJ10gPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUXVldWUgYSB2YWxpZGF0aW9uIGZvciBuZXcgY3VzdG9tIHN0eWxlcyB0byBiYXRjaCBzdHlsZSByZWNhbGN1bGF0aW9uc1xuICAgKi9cbiAgZW5xdWV1ZURvY3VtZW50VmFsaWRhdGlvbigpIHtcbiAgICBpZiAodGhpc1snZW5xdWV1ZWQnXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzWydlbnF1ZXVlZCddID0gdHJ1ZTtcbiAgICBkb2N1bWVudFdhaXQoKCkgPT4ge1xuICAgICAgdmFsaWRhdGVGbigpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MU3R5bGVFbGVtZW50fSBzdHlsZVxuICAgKi9cbiAgYWRkQ3VzdG9tU3R5bGUoc3R5bGUpIHtcbiAgICBpZiAoIXN0eWxlW1NFRU5fTUFSS0VSXSkge1xuICAgICAgc3R5bGVbU0VFTl9NQVJLRVJdID0gdHJ1ZTtcbiAgICAgIHRoaXNbJ2N1c3RvbVN0eWxlcyddLnB1c2goc3R5bGUpO1xuICAgICAgdGhpcy5lbnF1ZXVlRG9jdW1lbnRWYWxpZGF0aW9uKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0geyFDdXN0b21TdHlsZVByb3ZpZGVyfSBjdXN0b21TdHlsZVxuICAgKiBAcmV0dXJuIHtIVE1MU3R5bGVFbGVtZW50fVxuICAgKi9cbiAgZ2V0U3R5bGVGb3JDdXN0b21TdHlsZShjdXN0b21TdHlsZSkge1xuICAgIGxldCBzdHlsZTtcbiAgICBpZiAoY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10pIHtcbiAgICAgIHN0eWxlID0gY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUgPSBjdXN0b21TdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG4gIGZpbmRTdHlsZXMoKSB7XG4gICAgbGV0IGNzID0gdGhpc1snY3VzdG9tU3R5bGVzJ107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGN1c3RvbVN0eWxlID0gY3NbaV07XG4gICAgICBpZiAoY3VzdG9tU3R5bGVbUFJPQ0VTU0VEX01BUktFUl0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgc3R5bGUgPSB0aGlzLmdldFN0eWxlRm9yQ3VzdG9tU3R5bGUoY3VzdG9tU3R5bGUpO1xuICAgICAgaWYgKHN0eWxlKSB7XG4gICAgICAgIGN1c3RvbVN0eWxlW1BST0NFU1NFRF9NQVJLRVJdID0gdHJ1ZTtcbiAgICAgICAgLy8gSFRNTEltcG9ydHMgcG9seWZpbGwgbWF5IGhhdmUgY2xvbmVkIHRoZSBzdHlsZSBpbnRvIHRoZSBtYWluIGRvY3VtZW50LFxuICAgICAgICAvLyB3aGljaCBpcyByZWZlcmVuY2VkIHdpdGggX19hcHBsaWVkRWxlbWVudC5cbiAgICAgICAgLy8gQWxzbywgd2UgbXVzdCBjb3B5IG92ZXIgdGhlIGF0dHJpYnV0ZXMuXG4gICAgICAgIGxldCBhcHBsaWVkU3R5bGUgPSAvKiogQHR5cGUge0hUTUxTdHlsZUVsZW1lbnR9ICovKHN0eWxlWydfX2FwcGxpZWRFbGVtZW50J10pO1xuICAgICAgICBpZiAoYXBwbGllZFN0eWxlKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgYXR0ciA9IHN0eWxlLmF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBhcHBsaWVkU3R5bGUuc2V0QXR0cmlidXRlKGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICAgIHRyYW5zZm9ybUZuKGFwcGxpZWRTdHlsZSB8fCBzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlWydhZGRDdXN0b21TdHlsZSddID0gQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlLmFkZEN1c3RvbVN0eWxlO1xuQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlWydnZXRTdHlsZUZvckN1c3RvbVN0eWxlJ10gPSBDdXN0b21TdHlsZUludGVyZmFjZS5wcm90b3R5cGUuZ2V0U3R5bGVGb3JDdXN0b21TdHlsZTtcbkN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnZmluZFN0eWxlcyddID0gQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlLmZpbmRTdHlsZXM7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZSwge1xuICAndHJhbnNmb3JtQ2FsbGJhY2snOiB7XG4gICAgLyoqIEByZXR1cm4gez9mdW5jdGlvbighSFRNTFN0eWxlRWxlbWVudCl9ICovXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybUZuO1xuICAgIH0sXG4gICAgLyoqIEBwYXJhbSB7P2Z1bmN0aW9uKCFIVE1MU3R5bGVFbGVtZW50KX0gZm4gKi9cbiAgICBzZXQoZm4pIHtcbiAgICAgIHRyYW5zZm9ybUZuID0gZm47XG4gICAgfVxuICB9LFxuICAndmFsaWRhdGVDYWxsYmFjayc6IHtcbiAgICAvKiogQHJldHVybiB7P2Z1bmN0aW9uKCl9ICovXG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlRm47XG4gICAgfSxcbiAgICAvKiogQHBhcmFtIHs/ZnVuY3Rpb24oKX0gZm4gKi9cbiAgICBzZXQoZm4pIHtcbiAgICAgIHZhbGlkYXRlRm4gPSBmbjtcbiAgICB9LFxuICB9XG59KSIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTmF0aXZlUHJvcGVydGllcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gIC8vIHJlbW92ZSBwcmV2aW91cyBwcm9wZXJ0aWVzXG4gIGZvciAobGV0IHAgaW4gcHJvcGVydGllcykge1xuICAgIC8vIE5PVEU6IGZvciBiYyB3aXRoIHNoaW0sIGRvbid0IGFwcGx5IG51bGwgdmFsdWVzLlxuICAgIGlmIChwID09PSBudWxsKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KHApO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHAsIHByb3BlcnRpZXNbcF0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpLnRyaW0oKTtcbn0iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBDdXN0b21TdHlsZUludGVyZmFjZSBmcm9tICcuLi9zcmMvY3VzdG9tLXN0eWxlLWludGVyZmFjZSdcbmltcG9ydCB7Z2V0Q29tcHV0ZWRTdHlsZVZhbHVlLCB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi9zcmMvY29tbW9uLXV0aWxzJ1xuXG5jb25zdCBjdXN0b21TdHlsZUludGVyZmFjZSA9IG5ldyBDdXN0b21TdHlsZUludGVyZmFjZSgpO1xuXG5pZiAoIXdpbmRvd1snU2hhZHlDU1MnXSkge1xuICB3aW5kb3dbJ1NoYWR5Q1NTJ10gPSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZWxlbWVudEV4dGVuZHNcbiAgICAgKi9cbiAgICBbJ3ByZXBhcmVUZW1wbGF0ZSddKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBbJ3N0eWxlU3VidHJlZSddKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgICAgIGN1c3RvbVN0eWxlSW50ZXJmYWNlLmZpbmRTdHlsZXMoKTtcbiAgICAgIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMoZWxlbWVudCwgcHJvcGVydGllcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqL1xuICAgIFsnc3R5bGVFbGVtZW50J10oZWxlbWVudCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICBjdXN0b21TdHlsZUludGVyZmFjZS5maW5kU3R5bGVzKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgICAqL1xuICAgIFsnc3R5bGVEb2N1bWVudCddKHByb3BlcnRpZXMpIHtcbiAgICAgIGN1c3RvbVN0eWxlSW50ZXJmYWNlLmZpbmRTdHlsZXMoKTtcbiAgICAgIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIFsnZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlJ10oZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIH0sXG4gICAgWyduYXRpdmVDc3MnXTogdHJ1ZSxcbiAgICBbJ25hdGl2ZVNoYWRvdyddOiB0cnVlXG4gIH1cbn1cblxud2luZG93WydTaGFkeUNTUyddWydDdXN0b21TdHlsZUludGVyZmFjZSddID0gY3VzdG9tU3R5bGVJbnRlcmZhY2U7Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBOzs7Ozs7Ozs7O0FBVUEsQUFFQTtBQUNBLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQzs7O0FBR3hCLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksSUFBSSxDQUFDOzs7QUFHcEYsSUFBSSxTQUFTLENBQUM7Ozs7O0FBS2QsQUFBZSxTQUFTLFlBQVksQ0FBQyxRQUFRLEVBQUU7RUFDN0MsSUFBSSxTQUFTLEVBQUU7SUFDYixTQUFTLENBQUMsUUFBUSxDQUFDLENBQUE7R0FDcEIsTUFBTTtJQUNMLElBQUksQ0FBQyxZQUFZLEVBQUU7TUFDakIsWUFBWSxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQSxDQUFDLENBQUMsQ0FBQztNQUMvRCxJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO1FBQ3RDLFNBQVMsRUFBRSxDQUFDO09BQ2IsTUFBTTtRQUNMLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNO1VBQ2xE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"}