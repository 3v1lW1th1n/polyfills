{"version":3,"file":"element-style-interface.min.js","sources":["../src/template-map.js","../src/style-settings.js","../src/css-parse.js","../src/common-regex.js","../src/style-util.js","../src/apply-shim-utils.js","../src/element-style-interface.js","element-style-interface.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport default {};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport let nativeShadow = !(window['ShadyDOM'] && window['ShadyDOM']['inUse']);\n// chrome 49 has semi-working css vars, check if box-shadow works\n// safari 9.1 has a recalc bug: https://bugs.webkit.org/show_bug.cgi?id=155782\nexport let nativeCssVariables = (!navigator.userAgent.match('AppleWebKit/601') &&\nwindow.CSS && CSS.supports && CSS.supports('box-shadow', '0 0 0 var(--foo)'));\n\n/**\n * @param {?Object} settings\n */\nfunction parseSettings(settings) {\n  if (settings) {\n    nativeCssVariables = nativeCssVariables && !settings['shimcssproperties'];\n    nativeShadow = nativeShadow && !settings['shimshadow'];\n  }\n}\n\nif (window.ShadyCSS) {\n  parseSettings(window['ShadyCSS']);\n} else if (window.WebComponents) {\n  parseSettings(window['WebComponents']['flags']);\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nExtremely simple css parser. Intended to be not more than what we need\nand definitely not necessarily correct =).\n*/\n\n'use strict';\n\n/** @unrestricted */\nclass StyleNode {\n  constructor() {\n    /** @type {number} */\n    this['start'] = 0;\n    /** @type {number} */\n    this['end'] = 0;\n    /** @type {StyleNode} */\n    this['previous'] = null;\n    /** @type {StyleNode} */\n    this['parent'] = null;\n    /** @type {Array<StyleNode>} */\n    this['rules'] = null;\n    /** @type {string} */\n    this['parsedCssText'] = '';\n    /** @type {string} */\n    this['cssText'] = '';\n    /** @type {boolean} */\n    this['atRule'] = false;\n    /** @type {number} */\n    this['type'] = 0;\n    /** @type {string} */\n    this['keyframesName'] = '';\n    /** @type {string} */\n    this['selector'] = '';\n    /** @type {string} */\n    this['parsedSelector'] = '';\n  }\n}\n\nexport {StyleNode}\n\n// given a string of css, return a simple rule tree\n/**\n * @param {string} text\n * @return {StyleNode}\n */\nexport function parse(text) {\n  text = clean(text);\n  return parseCss(lex(text), text);\n}\n\n// remove stuff we don't care about that may hinder parsing\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction clean(cssText) {\n  return cssText.replace(RX.comments, '').replace(RX.port, '');\n}\n\n// super simple {...} lexer that returns a node tree\n/**\n * @param {string} text\n * @return {StyleNode}\n */\nfunction lex(text) {\n  let root = new StyleNode();\n  root['start'] = 0;\n  root['end'] = text.length\n  let n = root;\n  for (let i = 0, l = text.length; i < l; i++) {\n    if (text[i] === OPEN_BRACE) {\n      if (!n['rules']) {\n        n['rules'] = [];\n      }\n      let p = n;\n      let previous = p['rules'][p['rules'].length - 1] || null;\n      n = new StyleNode();\n      n['start'] = i + 1;\n      n['parent'] = p;\n      n['previous'] = previous;\n      p['rules'].push(n);\n    } else if (text[i] === CLOSE_BRACE) {\n      n['end'] = i + 1;\n      n = n['parent'] || root;\n    }\n  }\n  return root;\n}\n\n// add selectors/cssText to node tree\n/**\n * @param {StyleNode} node\n * @param {string} text\n * @return {StyleNode}\n */\nfunction parseCss(node, text) {\n  let t = text.substring(node['start'], node['end'] - 1);\n  node['parsedCssText'] = node['cssText'] = t.trim();\n  if (node['parent']) {\n    let ss = node['previous'] ? node['previous']['end'] : node['parent']['start'];\n    t = text.substring(ss, node['start'] - 1);\n    t = _expandUnicodeEscapes(t);\n    t = t.replace(RX.multipleSpaces, ' ');\n    // TODO(sorvell): ad hoc; make selector include only after last ;\n    // helps with mixin syntax\n    t = t.substring(t.lastIndexOf(';') + 1);\n    let s = node['parsedSelector'] = node['selector'] = t.trim();\n    node['atRule'] = (s.indexOf(AT_START) === 0);\n    // note, support a subset of rule types...\n    if (node['atRule']) {\n      if (s.indexOf(MEDIA_START) === 0) {\n        node['type'] = types.MEDIA_RULE;\n      } else if (s.match(RX.keyframesRule)) {\n        node['type'] = types.KEYFRAMES_RULE;\n        node['keyframesName'] =\n          node['selector'].split(RX.multipleSpaces).pop();\n      }\n    } else {\n      if (s.indexOf(VAR_START) === 0) {\n        node['type'] = types.MIXIN_RULE;\n      } else {\n        node['type'] = types.STYLE_RULE;\n      }\n    }\n  }\n  let r$ = node['rules'];\n  if (r$) {\n    for (let i = 0, l = r$.length, r;\n      (i < l) && (r = r$[i]); i++) {\n      parseCss(r, text);\n    }\n  }\n  return node;\n}\n\n/**\n * conversion of sort unicode escapes with spaces like `\\33 ` (and longer) into\n * expanded form that doesn't require trailing space `\\000033`\n * @param {string} s\n * @return {string}\n */\nfunction _expandUnicodeEscapes(s) {\n  return s.replace(/\\\\([0-9a-f]{1,6})\\s/gi, function() {\n    let code = arguments[1],\n      repeat = 6 - code.length;\n    while (repeat--) {\n      code = '0' + code;\n    }\n    return '\\\\' + code;\n  });\n}\n\n/**\n * stringify parsed css.\n * @param {StyleNode} node\n * @param {boolean=} preserveProperties\n * @param {string=} text\n * @return {string}\n */\nexport function stringify(node, preserveProperties, text = '') {\n  // calc rule cssText\n  let cssText = '';\n  if (node['cssText'] || node['rules']) {\n    let r$ = node['rules'];\n    if (r$ && !_hasMixinRules(r$)) {\n      for (let i = 0, l = r$.length, r;\n        (i < l) && (r = r$[i]); i++) {\n        cssText = stringify(r, preserveProperties, cssText);\n      }\n    } else {\n      cssText = preserveProperties ? node['cssText'] :\n        removeCustomProps(node['cssText']);\n      cssText = cssText.trim();\n      if (cssText) {\n        cssText = '  ' + cssText + '\\n';\n      }\n    }\n  }\n  // emit rule if there is cssText\n  if (cssText) {\n    if (node['selector']) {\n      text += node['selector'] + ' ' + OPEN_BRACE + '\\n';\n    }\n    text += cssText;\n    if (node['selector']) {\n      text += CLOSE_BRACE + '\\n\\n';\n    }\n  }\n  return text;\n}\n\n/**\n * @param {Array<StyleNode>} rules\n * @return {boolean}\n */\nfunction _hasMixinRules(rules) {\n  let r = rules[0];\n  return Boolean(r) && Boolean(r['selector']) && r['selector'].indexOf(VAR_START) === 0;\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction removeCustomProps(cssText) {\n  cssText = removeCustomPropAssignment(cssText);\n  return removeCustomPropApply(cssText);\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nexport function removeCustomPropAssignment(cssText) {\n  return cssText\n    .replace(RX.customProp, '')\n    .replace(RX.mixinProp, '');\n}\n\n/**\n * @param {string} cssText\n * @return {string}\n */\nfunction removeCustomPropApply(cssText) {\n  return cssText\n    .replace(RX.mixinApply, '')\n    .replace(RX.varApply, '');\n}\n\n/** @enum {number} */\nexport const types = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7,\n  MEDIA_RULE: 4,\n  MIXIN_RULE: 1000\n}\n\nconst OPEN_BRACE = '{';\nconst CLOSE_BRACE = '}';\n\n// helper regexp's\nconst RX = {\n  comments: /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,\n  port: /@import[^;]*;/gim,\n  customProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,\n  mixinProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,\n  mixinApply: /@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,\n  varApply: /[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,\n  keyframesRule: /^@[^\\s]*keyframes/,\n  multipleSpaces: /\\s+/g\n}\n\nconst VAR_START = '--';\nconst MEDIA_START = '@media';\nconst AT_START = '@';\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nexport const VAR_ASSIGN = /(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\\s}])|$)/gi;\nexport const MIXIN_MATCH = /(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi;\nexport const VAR_CONSUMED = /(--[\\w-]+)\\s*([:,;)]|$)/gi;\nexport const ANIMATION_MATCH = /(animation\\s*:)|(animation-name\\s*:)/;\nexport const MEDIA_MATCH = /@media[^(]*(\\([^)]*\\))/;\nexport const IS_VAR = /^--/;\nexport const BRACKETED = /\\{[^}]*\\}/g;\nexport const HOST_PREFIX = '(?:^|[^.#[:])';\nexport const HOST_SUFFIX = '($|[.:[\\\\s>+~])';","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {nativeShadow, nativeCssVariables} from './style-settings'\nimport {parse, stringify, types, StyleNode} from './css-parse' // eslint-disable-line no-unused-vars\nimport {MEDIA_MATCH} from './common-regex';\n\n/**\n * @param {string|StyleNode} rules\n * @param {function(StyleNode)=} callback\n */\nexport function toCssText (rules, callback) {\n  if (typeof rules === 'string') {\n    rules = parse(rules);\n  }\n  if (callback) {\n    forEachRule(rules, callback);\n  }\n  return stringify(rules, nativeCssVariables);\n}\n\n/**\n * @param {HTMLStyleElement} style\n * @return {StyleNode}\n */\nexport function rulesForStyle(style) {\n  if (!style['__cssRules'] && style.textContent) {\n    style['__cssRules'] = parse(style.textContent);\n  }\n  return style['__cssRules'];\n}\n\n// Tests if a rule is a keyframes selector, which looks almost exactly\n// like a normal selector but is not (it has nothing to do with scoping\n// for example).\n/**\n * @param {StyleNode} rule\n * @return {boolean}\n */\nexport function isKeyframesSelector(rule) {\n  return Boolean(rule['parent']) &&\n  rule['parent']['type'] === types.KEYFRAMES_RULE;\n}\n\n/**\n * @param {StyleNode} node\n * @param {Function=} styleRuleCallback\n * @param {Function=} keyframesRuleCallback\n * @param {boolean=} onlyActiveRules\n */\nexport function forEachRule(node, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {\n  if (!node) {\n    return;\n  }\n  let skipRules = false;\n  let type = node['type'];\n  if (onlyActiveRules) {\n    if (type === types.MEDIA_RULE) {\n      let matchMedia = node['selector'].match(MEDIA_MATCH);\n      if (matchMedia) {\n        // if rule is a non matching @media rule, skip subrules\n        if (!window.matchMedia(matchMedia[1]).matches) {\n          skipRules = true;\n        }\n      }\n    }\n  }\n  if (type === types.STYLE_RULE) {\n    styleRuleCallback(node);\n  } else if (keyframesRuleCallback &&\n    type === types.KEYFRAMES_RULE) {\n    keyframesRuleCallback(node);\n  } else if (type === types.MIXIN_RULE) {\n    skipRules = true;\n  }\n  let r$ = node['rules'];\n  if (r$ && !skipRules) {\n    for (let i=0, l=r$.length, r; (i<l) && (r=r$[i]); i++) {\n      forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);\n    }\n  }\n}\n\n// add a string of cssText to the document.\n/**\n * @param {string} cssText\n * @param {string} moniker\n * @param {Node} target\n * @param {Node} contextNode\n * @return {HTMLStyleElement}\n */\nexport function applyCss(cssText, moniker, target, contextNode) {\n  let style = createScopeStyle(cssText, moniker);\n  return applyStyle(style, target, contextNode);\n}\n\n/**\n * @param {Node} style\n * @param {?Node} target\n * @param {?Node} contextNode\n * @return {HTMLStyleElement}\n */\nexport function applyStyle(style, target, contextNode) {\n  target = target || document.head;\n  let after = (contextNode && contextNode.nextSibling) ||\n  target.firstChild;\n  lastHeadApplyNode = style;\n  return /** @type {HTMLStyleElement} */(target.insertBefore(style, after));\n}\n\n/**\n * @param {string} cssText\n * @param {string} moniker\n * @return {Element}\n */\nexport function createScopeStyle(cssText, moniker) {\n  let style = document.createElement('style');\n  if (moniker) {\n    style.setAttribute('scope', moniker);\n  }\n  style.textContent = cssText;\n  return style;\n}\n\n/** @type {Node} */\nlet lastHeadApplyNode = null;\n\n// insert a comment node as a styling position placeholder.\n/**\n * @param {string} moniker\n * @return {Node}\n */\nexport function applyStylePlaceHolder(moniker) {\n  let placeHolder = document.createComment(' Shady DOM styles for ' +\n    moniker + ' ');\n  let after = lastHeadApplyNode ?\n    lastHeadApplyNode['nextSibling'] : null;\n  let scope = document.head;\n  scope.insertBefore(placeHolder, after || scope.firstChild);\n  lastHeadApplyNode = placeHolder;\n  return placeHolder;\n}\n\n/**\n * @param {string} buildType\n * @return {boolean}\n */\nexport function isTargetedBuild(buildType) {\n  return nativeShadow ? buildType === 'shadow' : buildType === 'shady';\n}\n\n/**\n * @param {Element} element\n * @return {?string}\n */\nexport function getCssBuildType(element) {\n  return element.getAttribute('css-build');\n}\n\n/**\n * Walk from text[start] matching parens and\n * returns position of the outer end paren\n * @param {string} text\n * @param {number} start\n * @return {number}\n */\nfunction findMatchingParen(text, start) {\n  let level = 0;\n  for (let i=start, l=text.length; i < l; i++) {\n    if (text[i] === '(') {\n      level++;\n    } else if (text[i] === ')') {\n      if (--level === 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\n/**\n * @param {string} str\n * @param {function(string, string, string, string)} callback\n */\nexport function processVariableAndFallback(str, callback) {\n  // find 'var('\n  let start = str.indexOf('var(');\n  if (start === -1) {\n    // no var?, everything is prefix\n    return callback(str, '', '', '');\n  }\n  //${prefix}var(${inner})${suffix}\n  let end = findMatchingParen(str, start + 3);\n  let inner = str.substring(start + 4, end);\n  let prefix = str.substring(0, start);\n  // suffix may have other variables\n  let suffix = processVariableAndFallback(str.substring(end + 1), callback);\n  let comma = inner.indexOf(',');\n  // value and fallback args should be trimmed to match in property lookup\n  if (comma === -1) {\n    // variable, no fallback\n    return callback(prefix, inner.trim(), '', suffix);\n  }\n  // var(${value},${fallback})\n  let value = inner.substring(0, comma).trim();\n  let fallback = inner.substring(comma + 1).trim();\n  return callback(prefix, value, fallback, suffix);\n}\n\n/**\n * @param {Element} element\n * @param {string} value\n */\nexport function setElementClassRaw(element, value) {\n  // use native setAttribute provided by ShadyDOM when setAttribute is patched\n  if (window['ShadyDOM']) {\n    window['ShadyDOM']['nativeMethods']['setAttribute'].call(element, 'class', value);\n  } else {\n    element.setAttribute('class', value);\n  }\n}\n\n/**\n * @param {Element|Object} element\n * @return {{is: string, extends: string}}\n */\nexport function getIsExtends(element) {\n  let is = element.is || (element.getAttribute && element.getAttribute('is')) || element.localName;\n  let extendz = element.extends || element.localName !== is ? element.localName : '';\n  return {is, extends: extendz};\n}","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\nimport templateMap from './template-map'\nimport {StyleNode} from './css-parse' // eslint-disable-line no-unused-vars\n\n/**\n * @const {Promise}\n */\nconst promise = Promise.resolve();\n\nexport function invalidate(elementName){\n  let template = templateMap[elementName];\n  if (template) {\n    invalidateTemplate(template);\n  }\n}\n\nexport function invalidateTemplate(template) {\n  template._applyShimInvalid = true;\n}\n\nexport function isValid(elementName) {\n  let template = templateMap[elementName];\n  if (template) {\n    return templateIsValid(template);\n  }\n  return true;\n}\n\nexport function templateIsValid(template) {\n  return !template._applyShimInvalid;\n}\n\nexport function isValidating(elementName) {\n  let template = templateMap[elementName];\n  if (template) {\n    return templateIsValidating(template);\n  }\n  return false;\n}\n\nexport function templateIsValidating(template) {\n  return template._validating;\n}\n\n/*\nthe template is marked as `validating` for one microtask so that all instances\nfound in the tree crawl of `applyStyle` will update themselves,\nbut the template will only be updated once.\n*/\nexport function startValidating(elementName) {\n  let template = templateMap[elementName];\n  startValidatingTemplate(template);\n}\n\nexport function startValidatingTemplate(template) {\n  if (!template._validating) {\n    template._validating = true;\n    promise.then(function() {\n      template._applyShimInvalid = false;\n      template._validating = false;\n    });\n  }\n}\n\nexport class ApplyShimShim {\n  constructor() {\n    /** @type {Object} */\n    this.impl;\n  }\n  ensure() {\n    if (!this.impl) {\n      this.impl = window['ApplyShim'] || {\n        ['detectMixin'](){return false},\n        ['transformRule'](){},\n        ['transformRules'](){},\n        ['transformTemplate'](){},\n        ['transformCustomStyle'](){},\n        ['transformStyle'](){}\n      };\n      this.impl['invalidCallback'] = invalidate;\n    }\n  }\n  /**\n   * @param {string} text\n   * @return {boolean}\n   */\n  detectMixin(text) {\n    this.ensure();\n    return this.impl['detectMixin'](text);\n  }\n  /**\n   * @param {StyleNode} ast\n   * @param {string=} elementName\n   */\n  transformRules(ast, elementName) {\n    this.ensure();\n    return this.impl['transformRules'](ast, elementName);\n  }\n  /**\n   * @param {StyleNode} ast\n   */\n  transformRule(ast) {\n    this.ensure();\n    this.impl['transformRule'](ast);\n  }\n  /**\n   * @param {!HTMLStyleElement} style\n   * @param {string=} elementName\n   */\n  transformStyle(style, elementName = '') {\n    this.ensure();\n    this.impl['transformStyle'](style, elementName);\n  }\n  /**\n   * @param {!HTMLStyleElement} style\n   */\n  transformCustomStyle(style) {\n    this.ensure();\n    this.impl['transformCustomStyle'](style);\n  }\n  /**\n   * @param {!HTMLTemplateElement} template\n   * @param {string} elementName\n   */\n  transformTemplate(template, elementName) {\n    this.ensure();\n    this.impl['transformTemplate'](template, elementName);\n  }\n}","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nimport templateMap from './template-map'\nimport {getIsExtends} from './style-util'\nimport * as ApplyShimUtils from './apply-shim-utils'\n\nlet ScopingShim;\nlet ApplyShim;\nlet CustomStyleInterface;\n\n/**\n * @param {Element} element\n * @param {Object=} properties\n */\nfunction updateNativeProperties(element, properties) {\n  // remove previous properties\n  for (let p in properties) {\n    // NOTE: for bc with shim, don't apply null values.\n    if (p === null) {\n      element.style.removeProperty(p);\n    } else {\n      element.style.setProperty(p, properties[p]);\n    }\n  }\n}\n\n/**\n * @typedef {{\n *   prepareTemplate: function(HTMLTemplateElement, string, string=),\n *   flushCustomStyles: function(),\n *   styleSubtree: function(HTMLElement, Object=),\n *   styleElement: function(HTMLElement),\n *   styleDocument: function(Object=)\n * }}\n */\nlet StylingInterface; // eslint-disable-line no-unused-vars\n\n/** @implements {StylingInterface} */\nclass ShadyInterface {\n  prepareTemplate(template, elementName, elementExtends) {\n    ScopingShim['prepareTemplate'](template, elementName, elementExtends);\n  }\n  flushCustomStyles() {\n    ScopingShim['flushCustomStyles']();\n  }\n  styleSubtree(element, properties) {\n    ScopingShim['applySubtreeStyle'](element, properties);\n  }\n  styleElement(element) {\n    ScopingShim['applyElementStyle'](element);\n  }\n  styleDocument(properties) {\n    ScopingShim['updateStyles'](properties);\n  }\n}\n\n/** @implements {StylingInterface} */\nclass ApplyInterface {\n  constructor() {\n    this.applyShim = new ApplyShimUtils.ApplyShimShim();\n    this.customStyleInterface = null;\n    this.booted = false;\n  }\n  ensure() {\n    if (this.booted) {\n      return;\n    }\n    this.customStyleInterface = window['CustomStyleInterface'];\n    if (this.customStyleInterface) {\n      this.customStyleInterface['transformCallback'] = (style) => {\n        this.applyShim.transformCustomStyle(style);\n      };\n      this.customStyleInterface['validateCallback'] = () => {\n        this.flushCustomStyles();\n      }\n    }\n    this.booted = true;\n  }\n  prepareTemplate(template, elementName) {\n    this.ensure();\n    templateMap[elementName] = template;\n    this.applyShim.transformTemplate(template, elementName);\n  }\n  flushCustomStyles() {\n    this.ensure();\n    if (this.customStyleInterface) {\n      this.customStyleInterface['findStyles']();\n      let styles = this.customStyleInterface['customStyles'];\n      for (let i = 0; i < styles.length; i++ ) {\n        let cs = styles[i];\n        let style = this.customStyleInterface['getStyleForCustomStyle'](cs);\n        if (style) {\n          this.applyShim.transformCustomStyle(style);\n        }\n      }\n      this.customStyleInterface['enqueued'] = false;\n    }\n  }\n  styleSubtree(element, properties) {\n    this.ensure();\n    if (properties) {\n      updateNativeProperties(element, properties);\n    }\n    if (element.shadowRoot) {\n      this.styleElement(element);\n      let shadowChildren = element.shadowRoot.children || element.shadowRoot.childNodes;\n      for (let i = 0; i < shadowChildren.length; i++) {\n        this.styleSubtree(shadowChildren[i]);\n      }\n    }\n    let children = element.children || element.childNodes;\n    for (let i = 0; i < children.length; i++) {\n      this.styleSubtree(children[i]);\n    }\n  }\n  styleElement(element) {\n    this.ensure();\n    let {is} = getIsExtends(element);\n    let template = templateMap[is];\n    if (template && !ApplyShimUtils.templateIsValid(template)) {\n      // only revalidate template once\n      if (!ApplyShimUtils.templateIsValidating(template)) {\n        this.prepareTemplate(template, is);\n        ApplyShimUtils.startValidatingTemplate(template);\n      }\n      // update all instances\n      let root = element.shadowRoot;\n      if (root) {\n        let style = /** @type {HTMLStyleElement} */(root.querySelector('style'));\n        if (style) {\n          this.applyShim.transformStyle(style, is);\n        }\n      }\n    }\n  }\n  styleDocument(properties) {\n    this.ensure();\n    this.styleSubtree(document.documentElement, properties);\n  }\n}\n\n/** @implements {StylingInterface} */\nclass CustomOnlyInterface {\n  constructor() {\n    CustomStyleInterface['validateCallback'] = this.flushCustomStyles;\n  }\n  prepareTemplate() {}\n  flushCustomStyles() {\n    CustomStyleInterface['findStyles']();\n    CustomStyleInterface['enqueued'] = false;\n  }\n  styleSubtree(element, properties) {\n    updateNativeProperties(element, properties);\n  }\n  styleElement(element) {} // eslint-disable-line no-unused-vars\n  styleDocument(properties) {\n    updateNativeProperties(document.documentElement, properties);\n  }\n}\n\nexport default class ElementStyleInterface {\n  constructor() {\n    /** @type {StylingInterface} */\n    this.styleInterface = null;\n  }\n  ensure() {\n    if (this.styleInterface) {\n      return;\n    }\n    ScopingShim = window['ScopingShim'];\n    ApplyShim = window['ApplyShim'];\n    CustomStyleInterface = window['CustomStyleInterface'];\n    if (ScopingShim) {\n      this.styleInterface = new ShadyInterface();\n    } else if (ApplyShim) {\n      this.styleInterface = new ApplyInterface();\n    } else if (CustomStyleInterface) {\n      this.styleInterface = new CustomOnlyInterface();\n    }\n  }\n  /**\n   * @param {HTMLTemplateElement} template\n   * @param {string} elementName\n   * @param {string=} elementExtends\n   */\n  prepareTemplate(template, elementName, elementExtends) {\n    this.ensure();\n    if (this.styleInterface) {\n      this.styleInterface.prepareTemplate(template, elementName, elementExtends)\n    }\n  }\n\n  /**\n   * @param {Element} element\n   * @param {Object=} properties\n   */\n  styleSubtree(element, properties) {\n    this.ensure();\n    if (this.styleInterface) {\n      this.styleInterface.flushCustomStyles();\n      this.styleInterface.styleSubtree(element, properties);\n    }\n  }\n\n  /**\n   * @param {Element} element\n   */\n  styleElement(element) {\n    this.ensure();\n    if (this.styleInterface) {\n      this.styleInterface.flushCustomStyles();\n      this.styleInterface.styleElement(element);\n    }\n  }\n\n  /**\n   * @param {Object=} properties\n   */\n  styleDocument(properties) {\n    this.ensure();\n    if (this.styleInterface) {\n      this.styleInterface.flushCustomStyles();\n      this.styleInterface.styleDocument(properties);\n    }\n  }\n\n  /**\n   * @param {Element} element\n   * @param {string} property\n   * @return {string}\n   */\n  getComputedStyleValue(element, property) {\n    if (ScopingShim) {\n      return ScopingShim['getComputedStyleValue'](element, property);\n    } else {\n      return window.getComputedStyle(element).getPropertyValue(property).trim();\n    }\n  }\n}\n\nElementStyleInterface.prototype['prepareTemplate'] = ElementStyleInterface.prototype.prepareTemplate;\nElementStyleInterface.prototype['styleSubtree'] = ElementStyleInterface.prototype.styleSubtree;\nElementStyleInterface.prototype['styleElement'] = ElementStyleInterface.prototype.styleElement;\nElementStyleInterface.prototype['styleDocument'] = ElementStyleInterface.prototype.styleDocument;\nElementStyleInterface.prototype['getComputedStyleValue'] = ElementStyleInterface.prototype.getComputedStyleValue;","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport ElementStyleInterface from '../src/element-style-interface'\n\nwindow['ElementStyleInterface'] = new ElementStyleInterface();"],"names":["ApplyShimUtils.ApplyShimShim","ApplyShimUtils.templateIsValid","ApplyShimUtils.templateIsValidating","ApplyShimUtils.startValidatingTemplate"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9kZnJlZWRtL3BvbHltZXIvY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvdGVtcGxhdGUtbWFwLmpzIiwiL1VzZXJzL2RmcmVlZG0vcG9seW1lci9jb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9zdHlsZS1zZXR0aW5ncy5qcyIsIi9Vc2Vycy9kZnJlZWRtL3BvbHltZXIvY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvY3NzLXBhcnNlLmpzIiwiL1VzZXJzL2RmcmVlZG0vcG9seW1lci9jb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9jb21tb24tcmVnZXguanMiLCIvVXNlcnMvZGZyZWVkbS9wb2x5bWVyL2NvbXBvbmVudHMvc2hhZHljc3Mvc3JjL3N0eWxlLXV0aWwuanMiLCIvVXNlcnMvZGZyZWVkbS9wb2x5bWVyL2NvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2FwcGx5LXNoaW0tdXRpbHMuanMiLCIvVXNlcnMvZGZyZWVkbS9wb2x5bWVyL2NvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2VsZW1lbnQtc3R5bGUtaW50ZXJmYWNlLmpzIiwiL1VzZXJzL2RmcmVlZG0vcG9seW1lci9jb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2VsZW1lbnQtc3R5bGUtaW50ZXJmYWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNiBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQge307XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTYgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBsZXQgbmF0aXZlU2hhZG93ID0gISh3aW5kb3dbJ1NoYWR5RE9NJ10gJiYgd2luZG93WydTaGFkeURPTSddWydpblVzZSddKTtcbi8vIGNocm9tZSA0OSBoYXMgc2VtaS13b3JraW5nIGNzcyB2YXJzLCBjaGVjayBpZiBib3gtc2hhZG93IHdvcmtzXG4vLyBzYWZhcmkgOS4xIGhhcyBhIHJlY2FsYyBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTU3ODJcbmV4cG9ydCBsZXQgbmF0aXZlQ3NzVmFyaWFibGVzID0gKCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdBcHBsZVdlYktpdC82MDEnKSAmJlxud2luZG93LkNTUyAmJiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCdib3gtc2hhZG93JywgJzAgMCAwIHZhcigtLWZvbyknKSk7XG5cbi8qKlxuICogQHBhcmFtIHs/T2JqZWN0fSBzZXR0aW5nc1xuICovXG5mdW5jdGlvbiBwYXJzZVNldHRpbmdzKHNldHRpbmdzKSB7XG4gIGlmIChzZXR0aW5ncykge1xuICAgIG5hdGl2ZUNzc1ZhcmlhYmxlcyA9IG5hdGl2ZUNzc1ZhcmlhYmxlcyAmJiAhc2V0dGluZ3NbJ3NoaW1jc3Nwcm9wZXJ0aWVzJ107XG4gICAgbmF0aXZlU2hhZG93ID0gbmF0aXZlU2hhZG93ICYmICFzZXR0aW5nc1snc2hpbXNoYWRvdyddO1xuICB9XG59XG5cbmlmICh3aW5kb3cuU2hhZHlDU1MpIHtcbiAgcGFyc2VTZXR0aW5ncyh3aW5kb3dbJ1NoYWR5Q1NTJ10pO1xufSBlbHNlIGlmICh3aW5kb3cuV2ViQ29tcG9uZW50cykge1xuICBwYXJzZVNldHRpbmdzKHdpbmRvd1snV2ViQ29tcG9uZW50cyddWydmbGFncyddKTtcbn1cbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNiBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbi8qXG5FeHRyZW1lbHkgc2ltcGxlIGNzcyBwYXJzZXIuIEludGVuZGVkIHRvIGJlIG5vdCBtb3JlIHRoYW4gd2hhdCB3ZSBuZWVkXG5hbmQgZGVmaW5pdGVseSBub3QgbmVjZXNzYXJpbHkgY29ycmVjdCA9KS5cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqIEB1bnJlc3RyaWN0ZWQgKi9cbmNsYXNzIFN0eWxlTm9kZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXNbJ3N0YXJ0J10gPSAwO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXNbJ2VuZCddID0gMDtcbiAgICAvKiogQHR5cGUge1N0eWxlTm9kZX0gKi9cbiAgICB0aGlzWydwcmV2aW91cyddID0gbnVsbDtcbiAgICAvKiogQHR5cGUge1N0eWxlTm9kZX0gKi9cbiAgICB0aGlzWydwYXJlbnQnXSA9IG51bGw7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxTdHlsZU5vZGU+fSAqL1xuICAgIHRoaXNbJ3J1bGVzJ10gPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXNbJ3BhcnNlZENzc1RleHQnXSA9ICcnO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXNbJ2Nzc1RleHQnXSA9ICcnO1xuICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzWydhdFJ1bGUnXSA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXNbJ3R5cGUnXSA9IDA7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpc1sna2V5ZnJhbWVzTmFtZSddID0gJyc7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpc1snc2VsZWN0b3InXSA9ICcnO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXNbJ3BhcnNlZFNlbGVjdG9yJ10gPSAnJztcbiAgfVxufVxuXG5leHBvcnQge1N0eWxlTm9kZX1cblxuLy8gZ2l2ZW4gYSBzdHJpbmcgb2YgY3NzLCByZXR1cm4gYSBzaW1wbGUgcnVsZSB0cmVlXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XG4gIHRleHQgPSBjbGVhbih0ZXh0KTtcbiAgcmV0dXJuIHBhcnNlQ3NzKGxleCh0ZXh0KSwgdGV4dCk7XG59XG5cbi8vIHJlbW92ZSBzdHVmZiB3ZSBkb24ndCBjYXJlIGFib3V0IHRoYXQgbWF5IGhpbmRlciBwYXJzaW5nXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNsZWFuKGNzc1RleHQpIHtcbiAgcmV0dXJuIGNzc1RleHQucmVwbGFjZShSWC5jb21tZW50cywgJycpLnJlcGxhY2UoUlgucG9ydCwgJycpO1xufVxuXG4vLyBzdXBlciBzaW1wbGUgey4uLn0gbGV4ZXIgdGhhdCByZXR1cm5zIGEgbm9kZSB0cmVlXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gKi9cbmZ1bmN0aW9uIGxleCh0ZXh0KSB7XG4gIGxldCByb290ID0gbmV3IFN0eWxlTm9kZSgpO1xuICByb290WydzdGFydCddID0gMDtcbiAgcm9vdFsnZW5kJ10gPSB0ZXh0Lmxlbmd0aFxuICBsZXQgbiA9IHJvb3Q7XG4gIGZvciAobGV0IGkgPSAwLCBsID0gdGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAodGV4dFtpXSA9PT0gT1BFTl9CUkFDRSkge1xuICAgICAgaWYgKCFuWydydWxlcyddKSB7XG4gICAgICAgIG5bJ3J1bGVzJ10gPSBbXTtcbiAgICAgIH1cbiAgICAgIGxldCBwID0gbjtcbiAgICAgIGxldCBwcmV2aW91cyA9IHBbJ3J1bGVzJ11bcFsncnVsZXMnXS5sZW5ndGggLSAxXSB8fCBudWxsO1xuICAgICAgbiA9IG5ldyBTdHlsZU5vZGUoKTtcbiAgICAgIG5bJ3N0YXJ0J10gPSBpICsgMTtcbiAgICAgIG5bJ3BhcmVudCddID0gcDtcbiAgICAgIG5bJ3ByZXZpb3VzJ10gPSBwcmV2aW91cztcbiAgICAgIHBbJ3J1bGVzJ10ucHVzaChuKTtcbiAgICB9IGVsc2UgaWYgKHRleHRbaV0gPT09IENMT1NFX0JSQUNFKSB7XG4gICAgICBuWydlbmQnXSA9IGkgKyAxO1xuICAgICAgbiA9IG5bJ3BhcmVudCddIHx8IHJvb3Q7XG4gICAgfVxuICB9XG4gIHJldHVybiByb290O1xufVxuXG4vLyBhZGQgc2VsZWN0b3JzL2Nzc1RleHQgdG8gbm9kZSB0cmVlXG4vKipcbiAqIEBwYXJhbSB7U3R5bGVOb2RlfSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7U3R5bGVOb2RlfVxuICovXG5mdW5jdGlvbiBwYXJzZUNzcyhub2RlLCB0ZXh0KSB7XG4gIGxldCB0ID0gdGV4dC5zdWJzdHJpbmcobm9kZVsnc3RhcnQnXSwgbm9kZVsnZW5kJ10gLSAxKTtcbiAgbm9kZVsncGFyc2VkQ3NzVGV4dCddID0gbm9kZVsnY3NzVGV4dCddID0gdC50cmltKCk7XG4gIGlmIChub2RlWydwYXJlbnQnXSkge1xuICAgIGxldCBzcyA9IG5vZGVbJ3ByZXZpb3VzJ10gPyBub2RlWydwcmV2aW91cyddWydlbmQnXSA6IG5vZGVbJ3BhcmVudCddWydzdGFydCddO1xuICAgIHQgPSB0ZXh0LnN1YnN0cmluZyhzcywgbm9kZVsnc3RhcnQnXSAtIDEpO1xuICAgIHQgPSBfZXhwYW5kVW5pY29kZUVzY2FwZXModCk7XG4gICAgdCA9IHQucmVwbGFjZShSWC5tdWx0aXBsZVNwYWNlcywgJyAnKTtcbiAgICAvLyBUT0RPKHNvcnZlbGwpOiBhZCBob2M7IG1ha2Ugc2VsZWN0b3IgaW5jbHVkZSBvbmx5IGFmdGVyIGxhc3QgO1xuICAgIC8vIGhlbHBzIHdpdGggbWl4aW4gc3ludGF4XG4gICAgdCA9IHQuc3Vic3RyaW5nKHQubGFzdEluZGV4T2YoJzsnKSArIDEpO1xuICAgIGxldCBzID0gbm9kZVsncGFyc2VkU2VsZWN0b3InXSA9IG5vZGVbJ3NlbGVjdG9yJ10gPSB0LnRyaW0oKTtcbiAgICBub2RlWydhdFJ1bGUnXSA9IChzLmluZGV4T2YoQVRfU1RBUlQpID09PSAwKTtcbiAgICAvLyBub3RlLCBzdXBwb3J0IGEgc3Vic2V0IG9mIHJ1bGUgdHlwZXMuLi5cbiAgICBpZiAobm9kZVsnYXRSdWxlJ10pIHtcbiAgICAgIGlmIChzLmluZGV4T2YoTUVESUFfU1RBUlQpID09PSAwKSB7XG4gICAgICAgIG5vZGVbJ3R5cGUnXSA9IHR5cGVzLk1FRElBX1JVTEU7XG4gICAgICB9IGVsc2UgaWYgKHMubWF0Y2goUlgua2V5ZnJhbWVzUnVsZSkpIHtcbiAgICAgICAgbm9kZVsndHlwZSddID0gdHlwZXMuS0VZRlJBTUVTX1JVTEU7XG4gICAgICAgIG5vZGVbJ2tleWZyYW1lc05hbWUnXSA9XG4gICAgICAgICAgbm9kZVsnc2VsZWN0b3InXS5zcGxpdChSWC5tdWx0aXBsZVNwYWNlcykucG9wKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzLmluZGV4T2YoVkFSX1NUQVJUKSA9PT0gMCkge1xuICAgICAgICBub2RlWyd0eXBlJ10gPSB0eXBlcy5NSVhJTl9SVUxFO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZVsndHlwZSddID0gdHlwZXMuU1RZTEVfUlVMRTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbGV0IHIkID0gbm9kZVsncnVsZXMnXTtcbiAgaWYgKHIkKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSByJC5sZW5ndGgsIHI7XG4gICAgICAoaSA8IGwpICYmIChyID0gciRbaV0pOyBpKyspIHtcbiAgICAgIHBhcnNlQ3NzKHIsIHRleHQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZTtcbn1cblxuLyoqXG4gKiBjb252ZXJzaW9uIG9mIHNvcnQgdW5pY29kZSBlc2NhcGVzIHdpdGggc3BhY2VzIGxpa2UgYFxcMzMgYCAoYW5kIGxvbmdlcikgaW50b1xuICogZXhwYW5kZWQgZm9ybSB0aGF0IGRvZXNuJ3QgcmVxdWlyZSB0cmFpbGluZyBzcGFjZSBgXFwwMDAwMzNgXG4gKiBAcGFyYW0ge3N0cmluZ30gc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBfZXhwYW5kVW5pY29kZUVzY2FwZXMocykge1xuICByZXR1cm4gcy5yZXBsYWNlKC9cXFxcKFswLTlhLWZdezEsNn0pXFxzL2dpLCBmdW5jdGlvbigpIHtcbiAgICBsZXQgY29kZSA9IGFyZ3VtZW50c1sxXSxcbiAgICAgIHJlcGVhdCA9IDYgLSBjb2RlLmxlbmd0aDtcbiAgICB3aGlsZSAocmVwZWF0LS0pIHtcbiAgICAgIGNvZGUgPSAnMCcgKyBjb2RlO1xuICAgIH1cbiAgICByZXR1cm4gJ1xcXFwnICsgY29kZTtcbiAgfSk7XG59XG5cbi8qKlxuICogc3RyaW5naWZ5IHBhcnNlZCBjc3MuXG4gKiBAcGFyYW0ge1N0eWxlTm9kZX0gbm9kZVxuICogQHBhcmFtIHtib29sZWFuPX0gcHJlc2VydmVQcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IHRleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShub2RlLCBwcmVzZXJ2ZVByb3BlcnRpZXMsIHRleHQgPSAnJykge1xuICAvLyBjYWxjIHJ1bGUgY3NzVGV4dFxuICBsZXQgY3NzVGV4dCA9ICcnO1xuICBpZiAobm9kZVsnY3NzVGV4dCddIHx8IG5vZGVbJ3J1bGVzJ10pIHtcbiAgICBsZXQgciQgPSBub2RlWydydWxlcyddO1xuICAgIGlmIChyJCAmJiAhX2hhc01peGluUnVsZXMociQpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHIkLmxlbmd0aCwgcjtcbiAgICAgICAgKGkgPCBsKSAmJiAociA9IHIkW2ldKTsgaSsrKSB7XG4gICAgICAgIGNzc1RleHQgPSBzdHJpbmdpZnkociwgcHJlc2VydmVQcm9wZXJ0aWVzLCBjc3NUZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY3NzVGV4dCA9IHByZXNlcnZlUHJvcGVydGllcyA/IG5vZGVbJ2Nzc1RleHQnXSA6XG4gICAgICAgIHJlbW92ZUN1c3RvbVByb3BzKG5vZGVbJ2Nzc1RleHQnXSk7XG4gICAgICBjc3NUZXh0ID0gY3NzVGV4dC50cmltKCk7XG4gICAgICBpZiAoY3NzVGV4dCkge1xuICAgICAgICBjc3NUZXh0ID0gJyAgJyArIGNzc1RleHQgKyAnXFxuJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZW1pdCBydWxlIGlmIHRoZXJlIGlzIGNzc1RleHRcbiAgaWYgKGNzc1RleHQpIHtcbiAgICBpZiAobm9kZVsnc2VsZWN0b3InXSkge1xuICAgICAgdGV4dCArPSBub2RlWydzZWxlY3RvciddICsgJyAnICsgT1BFTl9CUkFDRSArICdcXG4nO1xuICAgIH1cbiAgICB0ZXh0ICs9IGNzc1RleHQ7XG4gICAgaWYgKG5vZGVbJ3NlbGVjdG9yJ10pIHtcbiAgICAgIHRleHQgKz0gQ0xPU0VfQlJBQ0UgKyAnXFxuXFxuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRleHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxTdHlsZU5vZGU+fSBydWxlc1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gX2hhc01peGluUnVsZXMocnVsZXMpIHtcbiAgbGV0IHIgPSBydWxlc1swXTtcbiAgcmV0dXJuIEJvb2xlYW4ocikgJiYgQm9vbGVhbihyWydzZWxlY3RvciddKSAmJiByWydzZWxlY3RvciddLmluZGV4T2YoVkFSX1NUQVJUKSA9PT0gMDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVDdXN0b21Qcm9wcyhjc3NUZXh0KSB7XG4gIGNzc1RleHQgPSByZW1vdmVDdXN0b21Qcm9wQXNzaWdubWVudChjc3NUZXh0KTtcbiAgcmV0dXJuIHJlbW92ZUN1c3RvbVByb3BBcHBseShjc3NUZXh0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tUHJvcEFzc2lnbm1lbnQoY3NzVGV4dCkge1xuICByZXR1cm4gY3NzVGV4dFxuICAgIC5yZXBsYWNlKFJYLmN1c3RvbVByb3AsICcnKVxuICAgIC5yZXBsYWNlKFJYLm1peGluUHJvcCwgJycpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUN1c3RvbVByb3BBcHBseShjc3NUZXh0KSB7XG4gIHJldHVybiBjc3NUZXh0XG4gICAgLnJlcGxhY2UoUlgubWl4aW5BcHBseSwgJycpXG4gICAgLnJlcGxhY2UoUlgudmFyQXBwbHksICcnKTtcbn1cblxuLyoqIEBlbnVtIHtudW1iZXJ9ICovXG5leHBvcnQgY29uc3QgdHlwZXMgPSB7XG4gIFNUWUxFX1JVTEU6IDEsXG4gIEtFWUZSQU1FU19SVUxFOiA3LFxuICBNRURJQV9SVUxFOiA0LFxuICBNSVhJTl9SVUxFOiAxMDAwXG59XG5cbmNvbnN0IE9QRU5fQlJBQ0UgPSAneyc7XG5jb25zdCBDTE9TRV9CUkFDRSA9ICd9JztcblxuLy8gaGVscGVyIHJlZ2V4cCdzXG5jb25zdCBSWCA9IHtcbiAgY29tbWVudHM6IC9cXC9cXCpbXipdKlxcKisoW14vKl1bXipdKlxcKispKlxcLy9naW0sXG4gIHBvcnQ6IC9AaW1wb3J0W147XSo7L2dpbSxcbiAgY3VzdG9tUHJvcDogLyg/Ol5bXjtcXC1cXHN9XSspPy0tW147e31dKj86W157fTtdKj8oPzpbO1xcbl18JCkvZ2ltLFxuICBtaXhpblByb3A6IC8oPzpeW147XFwtXFxzfV0rKT8tLVteO3t9XSo/Oltee307XSo/e1tefV0qP30oPzpbO1xcbl18JCk/L2dpbSxcbiAgbWl4aW5BcHBseTogL0BhcHBseVxccypcXCg/W14pO10qXFwpP1xccyooPzpbO1xcbl18JCk/L2dpbSxcbiAgdmFyQXBwbHk6IC9bXjs6XSo/OlteO10qP3ZhclxcKFteO10qXFwpKD86WztcXG5dfCQpPy9naW0sXG4gIGtleWZyYW1lc1J1bGU6IC9eQFteXFxzXSprZXlmcmFtZXMvLFxuICBtdWx0aXBsZVNwYWNlczogL1xccysvZ1xufVxuXG5jb25zdCBWQVJfU1RBUlQgPSAnLS0nO1xuY29uc3QgTUVESUFfU1RBUlQgPSAnQG1lZGlhJztcbmNvbnN0IEFUX1NUQVJUID0gJ0AnO1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuZXhwb3J0IGNvbnN0IFZBUl9BU1NJR04gPSAvKD86XnxbO1xcc3tdXFxzKikoLS1bXFx3LV0qPylcXHMqOlxccyooPzooW147e10qKXx7KFtefV0qKX0pKD86KD89WztcXHN9XSl8JCkvZ2k7XG5leHBvcnQgY29uc3QgTUlYSU5fTUFUQ0ggPSAvKD86XnxcXFcrKUBhcHBseVxccypcXCg/KFteKTtcXG5dKilcXCk/L2dpO1xuZXhwb3J0IGNvbnN0IFZBUl9DT05TVU1FRCA9IC8oLS1bXFx3LV0rKVxccyooWzosOyldfCQpL2dpO1xuZXhwb3J0IGNvbnN0IEFOSU1BVElPTl9NQVRDSCA9IC8oYW5pbWF0aW9uXFxzKjopfChhbmltYXRpb24tbmFtZVxccyo6KS87XG5leHBvcnQgY29uc3QgTUVESUFfTUFUQ0ggPSAvQG1lZGlhW14oXSooXFwoW14pXSpcXCkpLztcbmV4cG9ydCBjb25zdCBJU19WQVIgPSAvXi0tLztcbmV4cG9ydCBjb25zdCBCUkFDS0VURUQgPSAvXFx7W159XSpcXH0vZztcbmV4cG9ydCBjb25zdCBIT1NUX1BSRUZJWCA9ICcoPzpefFteLiNbOl0pJztcbmV4cG9ydCBjb25zdCBIT1NUX1NVRkZJWCA9ICcoJHxbLjpbXFxcXHM+K35dKSc7IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge25hdGl2ZVNoYWRvdywgbmF0aXZlQ3NzVmFyaWFibGVzfSBmcm9tICcuL3N0eWxlLXNldHRpbmdzJ1xuaW1wb3J0IHtwYXJzZSwgc3RyaW5naWZ5LCB0eXBlcywgU3R5bGVOb2RlfSBmcm9tICcuL2Nzcy1wYXJzZScgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHtNRURJQV9NQVRDSH0gZnJvbSAnLi9jb21tb24tcmVnZXgnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfFN0eWxlTm9kZX0gcnVsZXNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oU3R5bGVOb2RlKT19IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Nzc1RleHQgKHJ1bGVzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIHJ1bGVzID09PSAnc3RyaW5nJykge1xuICAgIHJ1bGVzID0gcGFyc2UocnVsZXMpO1xuICB9XG4gIGlmIChjYWxsYmFjaykge1xuICAgIGZvckVhY2hSdWxlKHJ1bGVzLCBjYWxsYmFjayk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ2lmeShydWxlcywgbmF0aXZlQ3NzVmFyaWFibGVzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBydWxlc0ZvclN0eWxlKHN0eWxlKSB7XG4gIGlmICghc3R5bGVbJ19fY3NzUnVsZXMnXSAmJiBzdHlsZS50ZXh0Q29udGVudCkge1xuICAgIHN0eWxlWydfX2Nzc1J1bGVzJ10gPSBwYXJzZShzdHlsZS50ZXh0Q29udGVudCk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlWydfX2Nzc1J1bGVzJ107XG59XG5cbi8vIFRlc3RzIGlmIGEgcnVsZSBpcyBhIGtleWZyYW1lcyBzZWxlY3Rvciwgd2hpY2ggbG9va3MgYWxtb3N0IGV4YWN0bHlcbi8vIGxpa2UgYSBub3JtYWwgc2VsZWN0b3IgYnV0IGlzIG5vdCAoaXQgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aCBzY29waW5nXG4vLyBmb3IgZXhhbXBsZSkuXG4vKipcbiAqIEBwYXJhbSB7U3R5bGVOb2RlfSBydWxlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNLZXlmcmFtZXNTZWxlY3RvcihydWxlKSB7XG4gIHJldHVybiBCb29sZWFuKHJ1bGVbJ3BhcmVudCddKSAmJlxuICBydWxlWydwYXJlbnQnXVsndHlwZSddID09PSB0eXBlcy5LRVlGUkFNRVNfUlVMRTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0eWxlTm9kZX0gbm9kZVxuICogQHBhcmFtIHtGdW5jdGlvbj19IHN0eWxlUnVsZUNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9uPX0ga2V5ZnJhbWVzUnVsZUNhbGxiYWNrXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvbmx5QWN0aXZlUnVsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hSdWxlKG5vZGUsIHN0eWxlUnVsZUNhbGxiYWNrLCBrZXlmcmFtZXNSdWxlQ2FsbGJhY2ssIG9ubHlBY3RpdmVSdWxlcykge1xuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IHNraXBSdWxlcyA9IGZhbHNlO1xuICBsZXQgdHlwZSA9IG5vZGVbJ3R5cGUnXTtcbiAgaWYgKG9ubHlBY3RpdmVSdWxlcykge1xuICAgIGlmICh0eXBlID09PSB0eXBlcy5NRURJQV9SVUxFKSB7XG4gICAgICBsZXQgbWF0Y2hNZWRpYSA9IG5vZGVbJ3NlbGVjdG9yJ10ubWF0Y2goTUVESUFfTUFUQ0gpO1xuICAgICAgaWYgKG1hdGNoTWVkaWEpIHtcbiAgICAgICAgLy8gaWYgcnVsZSBpcyBhIG5vbiBtYXRjaGluZyBAbWVkaWEgcnVsZSwgc2tpcCBzdWJydWxlc1xuICAgICAgICBpZiAoIXdpbmRvdy5tYXRjaE1lZGlhKG1hdGNoTWVkaWFbMV0pLm1hdGNoZXMpIHtcbiAgICAgICAgICBza2lwUnVsZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh0eXBlID09PSB0eXBlcy5TVFlMRV9SVUxFKSB7XG4gICAgc3R5bGVSdWxlQ2FsbGJhY2sobm9kZSk7XG4gIH0gZWxzZSBpZiAoa2V5ZnJhbWVzUnVsZUNhbGxiYWNrICYmXG4gICAgdHlwZSA9PT0gdHlwZXMuS0VZRlJBTUVTX1JVTEUpIHtcbiAgICBrZXlmcmFtZXNSdWxlQ2FsbGJhY2sobm9kZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gdHlwZXMuTUlYSU5fUlVMRSkge1xuICAgIHNraXBSdWxlcyA9IHRydWU7XG4gIH1cbiAgbGV0IHIkID0gbm9kZVsncnVsZXMnXTtcbiAgaWYgKHIkICYmICFza2lwUnVsZXMpIHtcbiAgICBmb3IgKGxldCBpPTAsIGw9ciQubGVuZ3RoLCByOyAoaTxsKSAmJiAocj1yJFtpXSk7IGkrKykge1xuICAgICAgZm9yRWFjaFJ1bGUociwgc3R5bGVSdWxlQ2FsbGJhY2ssIGtleWZyYW1lc1J1bGVDYWxsYmFjaywgb25seUFjdGl2ZVJ1bGVzKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gYWRkIGEgc3RyaW5nIG9mIGNzc1RleHQgdG8gdGhlIGRvY3VtZW50LlxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHBhcmFtIHtzdHJpbmd9IG1vbmlrZXJcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge05vZGV9IGNvbnRleHROb2RlXG4gKiBAcmV0dXJuIHtIVE1MU3R5bGVFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlDc3MoY3NzVGV4dCwgbW9uaWtlciwgdGFyZ2V0LCBjb250ZXh0Tm9kZSkge1xuICBsZXQgc3R5bGUgPSBjcmVhdGVTY29wZVN0eWxlKGNzc1RleHQsIG1vbmlrZXIpO1xuICByZXR1cm4gYXBwbHlTdHlsZShzdHlsZSwgdGFyZ2V0LCBjb250ZXh0Tm9kZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBzdHlsZVxuICogQHBhcmFtIHs/Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0gez9Ob2RlfSBjb250ZXh0Tm9kZVxuICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3R5bGUoc3R5bGUsIHRhcmdldCwgY29udGV4dE5vZGUpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IHx8IGRvY3VtZW50LmhlYWQ7XG4gIGxldCBhZnRlciA9IChjb250ZXh0Tm9kZSAmJiBjb250ZXh0Tm9kZS5uZXh0U2libGluZykgfHxcbiAgdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gIGxhc3RIZWFkQXBwbHlOb2RlID0gc3R5bGU7XG4gIHJldHVybiAvKiogQHR5cGUge0hUTUxTdHlsZUVsZW1lbnR9ICovKHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGFmdGVyKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb25pa2VyXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2NvcGVTdHlsZShjc3NUZXh0LCBtb25pa2VyKSB7XG4gIGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIGlmIChtb25pa2VyKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdzY29wZScsIG1vbmlrZXIpO1xuICB9XG4gIHN0eWxlLnRleHRDb250ZW50ID0gY3NzVGV4dDtcbiAgcmV0dXJuIHN0eWxlO1xufVxuXG4vKiogQHR5cGUge05vZGV9ICovXG5sZXQgbGFzdEhlYWRBcHBseU5vZGUgPSBudWxsO1xuXG4vLyBpbnNlcnQgYSBjb21tZW50IG5vZGUgYXMgYSBzdHlsaW5nIHBvc2l0aW9uIHBsYWNlaG9sZGVyLlxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9uaWtlclxuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3R5bGVQbGFjZUhvbGRlcihtb25pa2VyKSB7XG4gIGxldCBwbGFjZUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBTaGFkeSBET00gc3R5bGVzIGZvciAnICtcbiAgICBtb25pa2VyICsgJyAnKTtcbiAgbGV0IGFmdGVyID0gbGFzdEhlYWRBcHBseU5vZGUgP1xuICAgIGxhc3RIZWFkQXBwbHlOb2RlWyduZXh0U2libGluZyddIDogbnVsbDtcbiAgbGV0IHNjb3BlID0gZG9jdW1lbnQuaGVhZDtcbiAgc2NvcGUuaW5zZXJ0QmVmb3JlKHBsYWNlSG9sZGVyLCBhZnRlciB8fCBzY29wZS5maXJzdENoaWxkKTtcbiAgbGFzdEhlYWRBcHBseU5vZGUgPSBwbGFjZUhvbGRlcjtcbiAgcmV0dXJuIHBsYWNlSG9sZGVyO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBidWlsZFR5cGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RhcmdldGVkQnVpbGQoYnVpbGRUeXBlKSB7XG4gIHJldHVybiBuYXRpdmVTaGFkb3cgPyBidWlsZFR5cGUgPT09ICdzaGFkb3cnIDogYnVpbGRUeXBlID09PSAnc2hhZHknO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENzc0J1aWxkVHlwZShlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY3NzLWJ1aWxkJyk7XG59XG5cbi8qKlxuICogV2FsayBmcm9tIHRleHRbc3RhcnRdIG1hdGNoaW5nIHBhcmVucyBhbmRcbiAqIHJldHVybnMgcG9zaXRpb24gb2YgdGhlIG91dGVyIGVuZCBwYXJlblxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBmaW5kTWF0Y2hpbmdQYXJlbih0ZXh0LCBzdGFydCkge1xuICBsZXQgbGV2ZWwgPSAwO1xuICBmb3IgKGxldCBpPXN0YXJ0LCBsPXRleHQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHRleHRbaV0gPT09ICcoJykge1xuICAgICAgbGV2ZWwrKztcbiAgICB9IGVsc2UgaWYgKHRleHRbaV0gPT09ICcpJykge1xuICAgICAgaWYgKC0tbGV2ZWwgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZyl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVmFyaWFibGVBbmRGYWxsYmFjayhzdHIsIGNhbGxiYWNrKSB7XG4gIC8vIGZpbmQgJ3ZhcignXG4gIGxldCBzdGFydCA9IHN0ci5pbmRleE9mKCd2YXIoJyk7XG4gIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAvLyBubyB2YXI/LCBldmVyeXRoaW5nIGlzIHByZWZpeFxuICAgIHJldHVybiBjYWxsYmFjayhzdHIsICcnLCAnJywgJycpO1xuICB9XG4gIC8vJHtwcmVmaXh9dmFyKCR7aW5uZXJ9KSR7c3VmZml4fVxuICBsZXQgZW5kID0gZmluZE1hdGNoaW5nUGFyZW4oc3RyLCBzdGFydCArIDMpO1xuICBsZXQgaW5uZXIgPSBzdHIuc3Vic3RyaW5nKHN0YXJ0ICsgNCwgZW5kKTtcbiAgbGV0IHByZWZpeCA9IHN0ci5zdWJzdHJpbmcoMCwgc3RhcnQpO1xuICAvLyBzdWZmaXggbWF5IGhhdmUgb3RoZXIgdmFyaWFibGVzXG4gIGxldCBzdWZmaXggPSBwcm9jZXNzVmFyaWFibGVBbmRGYWxsYmFjayhzdHIuc3Vic3RyaW5nKGVuZCArIDEpLCBjYWxsYmFjayk7XG4gIGxldCBjb21tYSA9IGlubmVyLmluZGV4T2YoJywnKTtcbiAgLy8gdmFsdWUgYW5kIGZhbGxiYWNrIGFyZ3Mgc2hvdWxkIGJlIHRyaW1tZWQgdG8gbWF0Y2ggaW4gcHJvcGVydHkgbG9va3VwXG4gIGlmIChjb21tYSA9PT0gLTEpIHtcbiAgICAvLyB2YXJpYWJsZSwgbm8gZmFsbGJhY2tcbiAgICByZXR1cm4gY2FsbGJhY2socHJlZml4LCBpbm5lci50cmltKCksICcnLCBzdWZmaXgpO1xuICB9XG4gIC8vIHZhcigke3ZhbHVlfSwke2ZhbGxiYWNrfSlcbiAgbGV0IHZhbHVlID0gaW5uZXIuc3Vic3RyaW5nKDAsIGNvbW1hKS50cmltKCk7XG4gIGxldCBmYWxsYmFjayA9IGlubmVyLnN1YnN0cmluZyhjb21tYSArIDEpLnRyaW0oKTtcbiAgcmV0dXJuIGNhbGxiYWNrKHByZWZpeCwgdmFsdWUsIGZhbGxiYWNrLCBzdWZmaXgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFbGVtZW50Q2xhc3NSYXcoZWxlbWVudCwgdmFsdWUpIHtcbiAgLy8gdXNlIG5hdGl2ZSBzZXRBdHRyaWJ1dGUgcHJvdmlkZWQgYnkgU2hhZHlET00gd2hlbiBzZXRBdHRyaWJ1dGUgaXMgcGF0Y2hlZFxuICBpZiAod2luZG93WydTaGFkeURPTSddKSB7XG4gICAgd2luZG93WydTaGFkeURPTSddWyduYXRpdmVNZXRob2RzJ11bJ3NldEF0dHJpYnV0ZSddLmNhbGwoZWxlbWVudCwgJ2NsYXNzJywgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3tpczogc3RyaW5nLCBleHRlbmRzOiBzdHJpbmd9fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXNFeHRlbmRzKGVsZW1lbnQpIHtcbiAgbGV0IGlzID0gZWxlbWVudC5pcyB8fCAoZWxlbWVudC5nZXRBdHRyaWJ1dGUgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lzJykpIHx8IGVsZW1lbnQubG9jYWxOYW1lO1xuICBsZXQgZXh0ZW5keiA9IGVsZW1lbnQuZXh0ZW5kcyB8fCBlbGVtZW50LmxvY2FsTmFtZSAhPT0gaXMgPyBlbGVtZW50LmxvY2FsTmFtZSA6ICcnO1xuICByZXR1cm4ge2lzLCBleHRlbmRzOiBleHRlbmR6fTtcbn0iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgdGVtcGxhdGVNYXAgZnJvbSAnLi90ZW1wbGF0ZS1tYXAnXG5pbXBvcnQge1N0eWxlTm9kZX0gZnJvbSAnLi9jc3MtcGFyc2UnIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBAY29uc3Qge1Byb21pc2V9XG4gKi9cbmNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGUoZWxlbWVudE5hbWUpe1xuICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIGludmFsaWRhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICB0ZW1wbGF0ZS5fYXBwbHlTaGltSW52YWxpZCA9IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkKGVsZW1lbnROYW1lKSB7XG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXTtcbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlSXNWYWxpZCh0ZW1wbGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUlzVmFsaWQodGVtcGxhdGUpIHtcbiAgcmV0dXJuICF0ZW1wbGF0ZS5fYXBwbHlTaGltSW52YWxpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRhdGluZyhlbGVtZW50TmFtZSkge1xuICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZUlzVmFsaWRhdGluZyh0ZW1wbGF0ZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVJc1ZhbGlkYXRpbmcodGVtcGxhdGUpIHtcbiAgcmV0dXJuIHRlbXBsYXRlLl92YWxpZGF0aW5nO1xufVxuXG4vKlxudGhlIHRlbXBsYXRlIGlzIG1hcmtlZCBhcyBgdmFsaWRhdGluZ2AgZm9yIG9uZSBtaWNyb3Rhc2sgc28gdGhhdCBhbGwgaW5zdGFuY2VzXG5mb3VuZCBpbiB0aGUgdHJlZSBjcmF3bCBvZiBgYXBwbHlTdHlsZWAgd2lsbCB1cGRhdGUgdGhlbXNlbHZlcyxcbmJ1dCB0aGUgdGVtcGxhdGUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRWYWxpZGF0aW5nKGVsZW1lbnROYW1lKSB7XG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXTtcbiAgc3RhcnRWYWxpZGF0aW5nVGVtcGxhdGUodGVtcGxhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRWYWxpZGF0aW5nVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgaWYgKCF0ZW1wbGF0ZS5fdmFsaWRhdGluZykge1xuICAgIHRlbXBsYXRlLl92YWxpZGF0aW5nID0gdHJ1ZTtcbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICB0ZW1wbGF0ZS5fYXBwbHlTaGltSW52YWxpZCA9IGZhbHNlO1xuICAgICAgdGVtcGxhdGUuX3ZhbGlkYXRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXBwbHlTaGltU2hpbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgIHRoaXMuaW1wbDtcbiAgfVxuICBlbnN1cmUoKSB7XG4gICAgaWYgKCF0aGlzLmltcGwpIHtcbiAgICAgIHRoaXMuaW1wbCA9IHdpbmRvd1snQXBwbHlTaGltJ10gfHwge1xuICAgICAgICBbJ2RldGVjdE1peGluJ10oKXtyZXR1cm4gZmFsc2V9LFxuICAgICAgICBbJ3RyYW5zZm9ybVJ1bGUnXSgpe30sXG4gICAgICAgIFsndHJhbnNmb3JtUnVsZXMnXSgpe30sXG4gICAgICAgIFsndHJhbnNmb3JtVGVtcGxhdGUnXSgpe30sXG4gICAgICAgIFsndHJhbnNmb3JtQ3VzdG9tU3R5bGUnXSgpe30sXG4gICAgICAgIFsndHJhbnNmb3JtU3R5bGUnXSgpe31cbiAgICAgIH07XG4gICAgICB0aGlzLmltcGxbJ2ludmFsaWRDYWxsYmFjayddID0gaW52YWxpZGF0ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBkZXRlY3RNaXhpbih0ZXh0KSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICByZXR1cm4gdGhpcy5pbXBsWydkZXRlY3RNaXhpbiddKHRleHQpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge1N0eWxlTm9kZX0gYXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gZWxlbWVudE5hbWVcbiAgICovXG4gIHRyYW5zZm9ybVJ1bGVzKGFzdCwgZWxlbWVudE5hbWUpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIHJldHVybiB0aGlzLmltcGxbJ3RyYW5zZm9ybVJ1bGVzJ10oYXN0LCBlbGVtZW50TmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3R5bGVOb2RlfSBhc3RcbiAgICovXG4gIHRyYW5zZm9ybVJ1bGUoYXN0KSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICB0aGlzLmltcGxbJ3RyYW5zZm9ybVJ1bGUnXShhc3QpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MU3R5bGVFbGVtZW50fSBzdHlsZVxuICAgKiBAcGFyYW0ge3N0cmluZz19IGVsZW1lbnROYW1lXG4gICAqL1xuICB0cmFuc2Zvcm1TdHlsZShzdHlsZSwgZWxlbWVudE5hbWUgPSAnJykge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgdGhpcy5pbXBsWyd0cmFuc2Zvcm1TdHlsZSddKHN0eWxlLCBlbGVtZW50TmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gICAqL1xuICB0cmFuc2Zvcm1DdXN0b21TdHlsZShzdHlsZSkge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgdGhpcy5pbXBsWyd0cmFuc2Zvcm1DdXN0b21TdHlsZSddKHN0eWxlKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gICAqL1xuICB0cmFuc2Zvcm1UZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIHRoaXMuaW1wbFsndHJhbnNmb3JtVGVtcGxhdGUnXSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpO1xuICB9XG59IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuaW1wb3J0IHRlbXBsYXRlTWFwIGZyb20gJy4vdGVtcGxhdGUtbWFwJ1xuaW1wb3J0IHtnZXRJc0V4dGVuZHN9IGZyb20gJy4vc3R5bGUtdXRpbCdcbmltcG9ydCAqIGFzIEFwcGx5U2hpbVV0aWxzIGZyb20gJy4vYXBwbHktc2hpbS11dGlscydcblxubGV0IFNjb3BpbmdTaGltO1xubGV0IEFwcGx5U2hpbTtcbmxldCBDdXN0b21TdHlsZUludGVyZmFjZTtcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgLy8gcmVtb3ZlIHByZXZpb3VzIHByb3BlcnRpZXNcbiAgZm9yIChsZXQgcCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgLy8gTk9URTogZm9yIGJjIHdpdGggc2hpbSwgZG9uJ3QgYXBwbHkgbnVsbCB2YWx1ZXMuXG4gICAgaWYgKHAgPT09IG51bGwpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkocCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkocCwgcHJvcGVydGllc1twXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgcHJlcGFyZVRlbXBsYXRlOiBmdW5jdGlvbihIVE1MVGVtcGxhdGVFbGVtZW50LCBzdHJpbmcsIHN0cmluZz0pLFxuICogICBmbHVzaEN1c3RvbVN0eWxlczogZnVuY3Rpb24oKSxcbiAqICAgc3R5bGVTdWJ0cmVlOiBmdW5jdGlvbihIVE1MRWxlbWVudCwgT2JqZWN0PSksXG4gKiAgIHN0eWxlRWxlbWVudDogZnVuY3Rpb24oSFRNTEVsZW1lbnQpLFxuICogICBzdHlsZURvY3VtZW50OiBmdW5jdGlvbihPYmplY3Q9KVxuICogfX1cbiAqL1xubGV0IFN0eWxpbmdJbnRlcmZhY2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqIEBpbXBsZW1lbnRzIHtTdHlsaW5nSW50ZXJmYWNlfSAqL1xuY2xhc3MgU2hhZHlJbnRlcmZhY2Uge1xuICBwcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcykge1xuICAgIFNjb3BpbmdTaGltWydwcmVwYXJlVGVtcGxhdGUnXSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUsIGVsZW1lbnRFeHRlbmRzKTtcbiAgfVxuICBmbHVzaEN1c3RvbVN0eWxlcygpIHtcbiAgICBTY29waW5nU2hpbVsnZmx1c2hDdXN0b21TdHlsZXMnXSgpO1xuICB9XG4gIHN0eWxlU3VidHJlZShlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gICAgU2NvcGluZ1NoaW1bJ2FwcGx5U3VidHJlZVN0eWxlJ10oZWxlbWVudCwgcHJvcGVydGllcyk7XG4gIH1cbiAgc3R5bGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBTY29waW5nU2hpbVsnYXBwbHlFbGVtZW50U3R5bGUnXShlbGVtZW50KTtcbiAgfVxuICBzdHlsZURvY3VtZW50KHByb3BlcnRpZXMpIHtcbiAgICBTY29waW5nU2hpbVsndXBkYXRlU3R5bGVzJ10ocHJvcGVydGllcyk7XG4gIH1cbn1cblxuLyoqIEBpbXBsZW1lbnRzIHtTdHlsaW5nSW50ZXJmYWNlfSAqL1xuY2xhc3MgQXBwbHlJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFwcGx5U2hpbSA9IG5ldyBBcHBseVNoaW1VdGlscy5BcHBseVNoaW1TaGltKCk7XG4gICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZSA9IG51bGw7XG4gICAgdGhpcy5ib290ZWQgPSBmYWxzZTtcbiAgfVxuICBlbnN1cmUoKSB7XG4gICAgaWYgKHRoaXMuYm9vdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UgPSB3aW5kb3dbJ0N1c3RvbVN0eWxlSW50ZXJmYWNlJ107XG4gICAgaWYgKHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3RyYW5zZm9ybUNhbGxiYWNrJ10gPSAoc3R5bGUpID0+IHtcbiAgICAgICAgdGhpcy5hcHBseVNoaW0udHJhbnNmb3JtQ3VzdG9tU3R5bGUoc3R5bGUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3ZhbGlkYXRlQ2FsbGJhY2snXSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmJvb3RlZCA9IHRydWU7XG4gIH1cbiAgcHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBlbGVtZW50TmFtZSkge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgdGVtcGxhdGVNYXBbZWxlbWVudE5hbWVdID0gdGVtcGxhdGU7XG4gICAgdGhpcy5hcHBseVNoaW0udHJhbnNmb3JtVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lKTtcbiAgfVxuICBmbHVzaEN1c3RvbVN0eWxlcygpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmICh0aGlzLmN1c3RvbVN0eWxlSW50ZXJmYWNlKSB7XG4gICAgICB0aGlzLmN1c3RvbVN0eWxlSW50ZXJmYWNlWydmaW5kU3R5bGVzJ10oKTtcbiAgICAgIGxldCBzdHlsZXMgPSB0aGlzLmN1c3RvbVN0eWxlSW50ZXJmYWNlWydjdXN0b21TdHlsZXMnXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICBsZXQgY3MgPSBzdHlsZXNbaV07XG4gICAgICAgIGxldCBzdHlsZSA9IHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ2dldFN0eWxlRm9yQ3VzdG9tU3R5bGUnXShjcyk7XG4gICAgICAgIGlmIChzdHlsZSkge1xuICAgICAgICAgIHRoaXMuYXBwbHlTaGltLnRyYW5zZm9ybUN1c3RvbVN0eWxlKHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdHlsZVN1YnRyZWUoZWxlbWVudCwgcHJvcGVydGllcykge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMoZWxlbWVudCwgcHJvcGVydGllcyk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LnNoYWRvd1Jvb3QpIHtcbiAgICAgIHRoaXMuc3R5bGVFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgbGV0IHNoYWRvd0NoaWxkcmVuID0gZWxlbWVudC5zaGFkb3dSb290LmNoaWxkcmVuIHx8IGVsZW1lbnQuc2hhZG93Um9vdC5jaGlsZE5vZGVzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFkb3dDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnN0eWxlU3VidHJlZShzaGFkb3dDaGlsZHJlbltpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBjaGlsZHJlbiA9IGVsZW1lbnQuY2hpbGRyZW4gfHwgZWxlbWVudC5jaGlsZE5vZGVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3R5bGVTdWJ0cmVlKGNoaWxkcmVuW2ldKTtcbiAgICB9XG4gIH1cbiAgc3R5bGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGxldCB7aXN9ID0gZ2V0SXNFeHRlbmRzKGVsZW1lbnQpO1xuICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2lzXTtcbiAgICBpZiAodGVtcGxhdGUgJiYgIUFwcGx5U2hpbVV0aWxzLnRlbXBsYXRlSXNWYWxpZCh0ZW1wbGF0ZSkpIHtcbiAgICAgIC8vIG9ubHkgcmV2YWxpZGF0ZSB0ZW1wbGF0ZSBvbmNlXG4gICAgICBpZiAoIUFwcGx5U2hpbVV0aWxzLnRlbXBsYXRlSXNWYWxpZGF0aW5nKHRlbXBsYXRlKSkge1xuICAgICAgICB0aGlzLnByZXBhcmVUZW1wbGF0ZSh0ZW1wbGF0ZSwgaXMpO1xuICAgICAgICBBcHBseVNoaW1VdGlscy5zdGFydFZhbGlkYXRpbmdUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgICB9XG4gICAgICAvLyB1cGRhdGUgYWxsIGluc3RhbmNlc1xuICAgICAgbGV0IHJvb3QgPSBlbGVtZW50LnNoYWRvd1Jvb3Q7XG4gICAgICBpZiAocm9vdCkge1xuICAgICAgICBsZXQgc3R5bGUgPSAvKiogQHR5cGUge0hUTUxTdHlsZUVsZW1lbnR9ICovKHJvb3QucXVlcnlTZWxlY3Rvcignc3R5bGUnKSk7XG4gICAgICAgIGlmIChzdHlsZSkge1xuICAgICAgICAgIHRoaXMuYXBwbHlTaGltLnRyYW5zZm9ybVN0eWxlKHN0eWxlLCBpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgc3R5bGVEb2N1bWVudChwcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICB0aGlzLnN0eWxlU3VidHJlZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICB9XG59XG5cbi8qKiBAaW1wbGVtZW50cyB7U3R5bGluZ0ludGVyZmFjZX0gKi9cbmNsYXNzIEN1c3RvbU9ubHlJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBDdXN0b21TdHlsZUludGVyZmFjZVsndmFsaWRhdGVDYWxsYmFjayddID0gdGhpcy5mbHVzaEN1c3RvbVN0eWxlcztcbiAgfVxuICBwcmVwYXJlVGVtcGxhdGUoKSB7fVxuICBmbHVzaEN1c3RvbVN0eWxlcygpIHtcbiAgICBDdXN0b21TdHlsZUludGVyZmFjZVsnZmluZFN0eWxlcyddKCk7XG4gICAgQ3VzdG9tU3R5bGVJbnRlcmZhY2VbJ2VucXVldWVkJ10gPSBmYWxzZTtcbiAgfVxuICBzdHlsZVN1YnRyZWUoZWxlbWVudCwgcHJvcGVydGllcykge1xuICAgIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMoZWxlbWVudCwgcHJvcGVydGllcyk7XG4gIH1cbiAgc3R5bGVFbGVtZW50KGVsZW1lbnQpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgc3R5bGVEb2N1bWVudChwcm9wZXJ0aWVzKSB7XG4gICAgdXBkYXRlTmF0aXZlUHJvcGVydGllcyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVsZW1lbnRTdHlsZUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7U3R5bGluZ0ludGVyZmFjZX0gKi9cbiAgICB0aGlzLnN0eWxlSW50ZXJmYWNlID0gbnVsbDtcbiAgfVxuICBlbnN1cmUoKSB7XG4gICAgaWYgKHRoaXMuc3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU2NvcGluZ1NoaW0gPSB3aW5kb3dbJ1Njb3BpbmdTaGltJ107XG4gICAgQXBwbHlTaGltID0gd2luZG93WydBcHBseVNoaW0nXTtcbiAgICBDdXN0b21TdHlsZUludGVyZmFjZSA9IHdpbmRvd1snQ3VzdG9tU3R5bGVJbnRlcmZhY2UnXTtcbiAgICBpZiAoU2NvcGluZ1NoaW0pIHtcbiAgICAgIHRoaXMuc3R5bGVJbnRlcmZhY2UgPSBuZXcgU2hhZHlJbnRlcmZhY2UoKTtcbiAgICB9IGVsc2UgaWYgKEFwcGx5U2hpbSkge1xuICAgICAgdGhpcy5zdHlsZUludGVyZmFjZSA9IG5ldyBBcHBseUludGVyZmFjZSgpO1xuICAgIH0gZWxzZSBpZiAoQ3VzdG9tU3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXMuc3R5bGVJbnRlcmZhY2UgPSBuZXcgQ3VzdG9tT25seUludGVyZmFjZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBlbGVtZW50RXh0ZW5kc1xuICAgKi9cbiAgcHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmICh0aGlzLnN0eWxlSW50ZXJmYWNlKSB7XG4gICAgICB0aGlzLnN0eWxlSW50ZXJmYWNlLnByZXBhcmVUZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUsIGVsZW1lbnRFeHRlbmRzKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wZXJ0aWVzXG4gICAqL1xuICBzdHlsZVN1YnRyZWUoZWxlbWVudCwgcHJvcGVydGllcykge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgaWYgKHRoaXMuc3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHRoaXMuc3R5bGVJbnRlcmZhY2UuZmx1c2hDdXN0b21TdHlsZXMoKTtcbiAgICAgIHRoaXMuc3R5bGVJbnRlcmZhY2Uuc3R5bGVTdWJ0cmVlKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICovXG4gIHN0eWxlRWxlbWVudChlbGVtZW50KSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICBpZiAodGhpcy5zdHlsZUludGVyZmFjZSkge1xuICAgICAgdGhpcy5zdHlsZUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgdGhpcy5zdHlsZUludGVyZmFjZS5zdHlsZUVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgKi9cbiAgc3R5bGVEb2N1bWVudChwcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICBpZiAodGhpcy5zdHlsZUludGVyZmFjZSkge1xuICAgICAgdGhpcy5zdHlsZUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgdGhpcy5zdHlsZUludGVyZmFjZS5zdHlsZURvY3VtZW50KHByb3BlcnRpZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldENvbXB1dGVkU3R5bGVWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSkge1xuICAgIGlmIChTY29waW5nU2hpbSkge1xuICAgICAgcmV0dXJuIFNjb3BpbmdTaGltWydnZXRDb21wdXRlZFN0eWxlVmFsdWUnXShlbGVtZW50LCBwcm9wZXJ0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KS50cmltKCk7XG4gICAgfVxuICB9XG59XG5cbkVsZW1lbnRTdHlsZUludGVyZmFjZS5wcm90b3R5cGVbJ3ByZXBhcmVUZW1wbGF0ZSddID0gRWxlbWVudFN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5wcmVwYXJlVGVtcGxhdGU7XG5FbGVtZW50U3R5bGVJbnRlcmZhY2UucHJvdG90eXBlWydzdHlsZVN1YnRyZWUnXSA9IEVsZW1lbnRTdHlsZUludGVyZmFjZS5wcm90b3R5cGUuc3R5bGVTdWJ0cmVlO1xuRWxlbWVudFN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnc3R5bGVFbGVtZW50J10gPSBFbGVtZW50U3R5bGVJbnRlcmZhY2UucHJvdG90eXBlLnN0eWxlRWxlbWVudDtcbkVsZW1lbnRTdHlsZUludGVyZmFjZS5wcm90b3R5cGVbJ3N0eWxlRG9jdW1lbnQnXSA9IEVsZW1lbnRTdHlsZUludGVyZmFjZS5wcm90b3R5cGUuc3R5bGVEb2N1bWVudDtcbkVsZW1lbnRTdHlsZUludGVyZmFjZS5wcm90b3R5cGVbJ2dldENvbXB1dGVkU3R5bGVWYWx1ZSddID0gRWxlbWVudFN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlVmFsdWU7IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCBFbGVtZW50U3R5bGVJbnRlcmZhY2UgZnJvbSAnLi4vc3JjL2VsZW1lbnQtc3R5bGUtaW50ZXJmYWNlJ1xuXG53aW5kb3dbJ0VsZW1lbnRTdHlsZUludGVyZmFjZSddID0gbmV3IEVsZW1lbnRTdHlsZUludGVyZmFjZSgpOyJdLCJuYW1lcyI6WyJBcHBseVNoaW1VdGlscy5BcHBseVNoaW1TaGltIiwiQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkIiwiQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkYXRpbmciLCJBcHBseVNoaW1VdGlscy5zdGFydFZhbGlkYXRpbmdUZW1wbGF0ZSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7Ozs7Ozs7Ozs7QUFVQSxBQUVBLGtCQUFlLEVBQUUsQ0FBQzs7QUNabEI7Ozs7Ozs7Ozs7QUFVQSxBQUVBLEFBQU8sSUFBSSxZQUFZLEdBQUcsRUFBRSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7OztBQUcvRSxBQUFPLElBQUksa0JBQWtCLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztBQUM5RSxNQUFNLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxRQUFRLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDOzs7OztBQUs5RSxTQUFTLGFBQWEsQ0FBQyxRQUFRLEVBQUU7RUFDL0IsSUFBSSxRQUFRLEVBQUU7SUFDWixrQkFBa0IsR0FBRyxrQkFBa0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQzFFLFlBQVksR0FBRyxZQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7R0FDeEQ7Q0FDRjs7QUFFRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUU7RUFDbkIsYUFBYSxDQUFDLE1BQU0s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"}