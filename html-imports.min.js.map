{"version":3,"sources":["src/html-imports.js"],"names":["scope","Loader","onLoad","onComplete","cache","onload","oncomplete","inflight","pending","fixUrlsInTemplates","element","base","t$","querySelectorAll","i","length","content","template","n$","n","localName","path","resolveUrlsInStyle","l","attrs","a","at","v","attributes","value","search","resolveUrlsInCssText","replaceAttrUrl","whenReady","callback","doc","rootDocument","whenDocumentReady","watchImportsLoad","readyState","requiredReadyState","checkReady","removeEventListener","READY_EVENT","addEventListener","markTargetLoaded","event","target","__loaded","checkDone","parsedCount","importCount","allImports","imports","loadedImports","newImports","errorImports","loadedImport","e","push","errorLoadingImport","IMPORT_SELECTOR","Array","prototype","slice","call","filter","matches","imp","useNative","import","IMPORT_LINK_TYPE","document","createElement","hasShadowDOMPolyfill","ShadowDOMPolyfill","window","wrapIfNeeded","currentScriptDescriptor","get","script","currentScript","scripts","node","configurable","Object","defineProperty","ABS_URL_TEST","CSS_URL_REGEXP","CSS_IMPORT_REGEXP","style","linkUrl","textContent","ownerDocument","resolver","cssText","r","replaceUrls","text","regexp","replace","m","pre","url","post","urlPath","href","URL","test","xhr","async","ok","request","status","load","next","nextContext","XMLHttpRequest","open","redirectedUrl","locationHeader","getResponseHeader","substr","location","origin","console","error","message","response","responseText","send","loadDocument","responseType","addNodes","nodes","require","addNode","elt","src","__nodeUrl","dedupe","fetch","tail","match","pieces","split","body","header","indexOf","atob","decodeURIComponent","setTimeout","receive","bind","err","resource","receiveXhr","$p","p","importer","documents","documentPreloadSelectors","importsPreloadSelectors","loadNode","importLoader","loadSubtree","parent","marshalNodes","loadSelectorsForNode","loaded","__resource","__error","getAttribute","undefined","setAttribute","display","innerHTML","s$","o","type","scriptType","__baseURI","assetpath","importsSelectors","__importLink","bootDocument","__doc","loadedAll","_flatten","c","parentNode","replaceChild","_fireEvents","observe","head","__firstImport","insertBefore","dispatchEvent","CustomEvent","__importObserver","MutationObserver","mxns","forEach","addedNodes","nodeType","Node","ELEMENT_NODE","childList","subtree","isIE","navigator","userAgent","handleImport","rel","detail","ready","readyTime","getTime","Date","evt","createEvent","initCustomEvent","baseURI","baseURIDescriptor","querySelector","bootstrap","attachEvent","HTMLImports"],"mappings":"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","file":"html-imports.min.js","sourcesContent":["/**\r\n * @license\r\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\r\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n * Code distributed by Google as part of the polymer project is also\r\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n */\r\n(function(scope) {\r\n\r\n/********************* base setup *********************/\r\nvar IMPORT_LINK_TYPE = 'import';\r\nvar IMPORT_SELECTOR = 'link[rel=' + IMPORT_LINK_TYPE + ']';\r\nvar useNative = Boolean(IMPORT_LINK_TYPE in document.createElement('link'));\r\nvar flags = {bust: false, log: false};\r\n\r\n/**\r\n  Support `currentScript` on all browsers as `document._currentScript.`\r\n\r\n  NOTE: We cannot polyfill `document.currentScript` because it's not possible\r\n  both to override and maintain the ability to capture the native value.\r\n  Therefore we choose to expose `_currentScript` both when native imports\r\n  and the polyfill are in use.\r\n*/\r\n// NOTE: ShadowDOMPolyfill intrusion.\r\nvar hasShadowDOMPolyfill = Boolean(window.ShadowDOMPolyfill);\r\nvar wrap = function(node) {\r\n  return hasShadowDOMPolyfill ? window.ShadowDOMPolyfill.wrapIfNeeded(node) : node;\r\n};\r\nvar rootDocument = wrap(document);\r\n\r\nvar currentScriptDescriptor = {\r\n  get: function() {\r\n    var script = scope.currentScript || document.currentScript ||\r\n        // NOTE: only works when called in synchronously executing code.\r\n        // readyState should check if `loading` but IE10 is\r\n        // interactive when scripts run so we cheat.\r\n        (document.readyState !== 'complete' ?\r\n        document.scripts[document.scripts.length - 1] : null);\r\n    return wrap(script);\r\n  },\r\n  configurable: true\r\n};\r\n\r\nObject.defineProperty(document, '_currentScript', currentScriptDescriptor);\r\nObject.defineProperty(rootDocument, '_currentScript', currentScriptDescriptor);\r\n\r\n/********************* path fixup *********************/\r\nvar ABS_URL_TEST = /(^\\/)|(^#)|(^[\\w-\\d]*:)/;\r\nvar CSS_URL_REGEXP = /(url\\()([^)]*)(\\))/g;\r\nvar CSS_IMPORT_REGEXP = /(@import[\\s]+(?!url\\())([^;]*)(;)/g;\r\n\r\n// path fixup: style elements in imports must be made relative to the main\r\n// document. We fixup url's in url() and @import.\r\nvar path = {\r\n\r\n  resolveUrlsInStyle: function(style, linkUrl) {\r\n    var doc = style.ownerDocument;\r\n    var resolver = doc.createElement('a');\r\n    style.textContent = this.resolveUrlsInCssText(style.textContent, linkUrl, resolver);\r\n    return style;\r\n  },\r\n\r\n  resolveUrlsInCssText: function(cssText, linkUrl) {\r\n    var r = this.replaceUrls(cssText, linkUrl, CSS_URL_REGEXP);\r\n    r = this.replaceUrls(r, linkUrl, CSS_IMPORT_REGEXP);\r\n    return r;\r\n  },\r\n\r\n  replaceUrls: function(text, linkUrl, regexp) {\r\n    return text.replace(regexp, function(m, pre, url, post) {\r\n      var urlPath = url.replace(/[\"']/g, '');\r\n      if (linkUrl) {\r\n        urlPath = (new URL(urlPath, linkUrl)).href;\r\n      }\r\n      return pre + '\\'' + urlPath + '\\'' + post;\r\n    });\r\n  },\r\n\r\n  replaceAttrUrl: function(text, linkUrl) {\r\n    if (text && ABS_URL_TEST.test(text)) {\r\n      return text;\r\n    } else {\r\n      return new URL(text, linkUrl).href;\r\n    }\r\n  }\r\n\r\n};\r\n\r\n/********************* xhr processor *********************/\r\nvar xhr = {\r\n  async: true,\r\n\r\n  ok: function(request) {\r\n    return (request.status >= 200 && request.status < 300)\r\n        || (request.status === 304)\r\n        || (request.status === 0);\r\n  },\r\n\r\n  load: function(url, next, nextContext) {\r\n    var request = new XMLHttpRequest();\r\n    if (flags.bust) {\r\n      url += '?' + Math.random();\r\n    }\r\n    request.open('GET', url, xhr.async);\r\n    request.addEventListener('readystatechange', function(e) {\r\n      if (request.readyState === 4) {\r\n        // Servers redirecting an import can add a Location header to help us\r\n        // polyfill correctly.\r\n        var redirectedUrl = null;\r\n        try {\r\n          var locationHeader = request.getResponseHeader(\"Location\");\r\n          if (locationHeader) {\r\n            redirectedUrl = (locationHeader.substr( 0, 1 ) === \"/\")\r\n              ? location.origin + locationHeader  // Location is a relative path\r\n              : locationHeader;                   // Full path\r\n          }\r\n        } catch ( e ) {\r\n            console.error( e.message );\r\n        }\r\n        next.call(nextContext, !xhr.ok(request) && request,\r\n            request.response || request.responseText, redirectedUrl);\r\n      }\r\n    });\r\n    request.send();\r\n    return request;\r\n  },\r\n\r\n  loadDocument: function(url, next, nextContext) {\r\n    this.load(url, next, nextContext).responseType = 'document';\r\n  }\r\n\r\n};\r\n\r\n/********************* loader *********************/\r\n// This loader supports a dynamic list of urls\r\n// and an oncomplete callback that is called when the loader is done.\r\n// NOTE: The polyfill currently does *not* need this dynamism or the\r\n// onComplete concept. Because of this, the loader could be simplified\r\n// quite a bit.\r\nvar Loader = function(onLoad, onComplete) {\r\n  this.cache = {};\r\n  this.onload = onLoad;\r\n  this.oncomplete = onComplete;\r\n  this.inflight = 0;\r\n  this.pending = {};\r\n};\r\n\r\nLoader.prototype = {\r\n\r\n  addNodes: function(nodes) {\r\n    // number of transactions to complete\r\n    this.inflight += nodes.length;\r\n    // commence transactions\r\n    for (var i=0, l=nodes.length, n; (i<l) && (n=nodes[i]); i++) {\r\n      this.require(n);\r\n    }\r\n    // anything to do?\r\n    this.checkDone();\r\n  },\r\n\r\n  addNode: function(node) {\r\n    // number of transactions to complete\r\n    this.inflight++;\r\n    // commence transactions\r\n    this.require(node);\r\n    // anything to do?\r\n    this.checkDone();\r\n  },\r\n\r\n  require: function(elt) {\r\n    var url = elt.src || elt.href;\r\n    // ensure we have a standard url that can be used\r\n    // reliably for deduping.\r\n    // TODO(sjmiles): ad-hoc\r\n    elt.__nodeUrl = url;\r\n    // deduplication\r\n    if (!this.dedupe(url, elt)) {\r\n      // fetch this resource\r\n      this.fetch(url, elt);\r\n    }\r\n  },\r\n\r\n  dedupe: function(url, elt) {\r\n    if (this.pending[url]) {\r\n      // add to list of nodes waiting for inUrl\r\n      this.pending[url].push(elt);\r\n      // don't need fetch\r\n      return true;\r\n    }\r\n    var resource;\r\n    if (this.cache[url]) {\r\n      this.onload(url, elt, this.cache[url]);\r\n      // finished this transaction\r\n      this.tail();\r\n      // don't need fetch\r\n      return true;\r\n    }\r\n    // first node waiting for inUrl\r\n    this.pending[url] = [elt];\r\n    // need fetch (not a dupe)\r\n    return false;\r\n  },\r\n\r\n  fetch: function(url, elt) {\r\n    flags.log && console.log('fetch', url, elt);\r\n    if (!url) {\r\n      setTimeout(function() {\r\n        this.receive(url, elt, {error: 'href must be specified'}, null);\r\n      }.bind(this), 0);\r\n    } else if (url.match(/^data:/)) {\r\n      // Handle Data URI Scheme\r\n      var pieces = url.split(',');\r\n      var header = pieces[0];\r\n      var body = pieces[1];\r\n      if(header.indexOf(';base64') > -1) {\r\n        body = atob(body);\r\n      } else {\r\n        body = decodeURIComponent(body);\r\n      }\r\n      setTimeout(function() {\r\n          this.receive(url, elt, null, body);\r\n      }.bind(this), 0);\r\n    } else {\r\n      var receiveXhr = function(err, resource, redirectedUrl) {\r\n        this.receive(url, elt, err, resource, redirectedUrl);\r\n      }.bind(this);\r\n      xhr.load(url, receiveXhr);\r\n    }\r\n  },\r\n\r\n  receive: function(url, elt, err, resource, redirectedUrl) {\r\n    this.cache[url] = resource;\r\n    var $p = this.pending[url];\r\n    for (var i=0, l=$p.length, p; (i<l) && (p=$p[i]); i++) {\r\n      // If url was redirected, use the redirected location so paths are\r\n      // calculated relative to that.\r\n      this.onload(url, p, resource, err, redirectedUrl);\r\n      this.tail();\r\n    }\r\n    this.pending[url] = null;\r\n  },\r\n\r\n  tail: function() {\r\n    --this.inflight;\r\n    this.checkDone();\r\n  },\r\n\r\n  checkDone: function() {\r\n    if (!this.inflight) {\r\n      this.oncomplete();\r\n    }\r\n  }\r\n};\r\n\r\n/********************* importer *********************/\r\nvar importsSelectors = [\r\n    IMPORT_SELECTOR,\r\n    'link[rel=stylesheet]:not([type])',\r\n    'style:not([type])',\r\n    'script:not([type])',\r\n    'script[type=\"application/javascript\"]',\r\n    'script[type=\"text/javascript\"]'\r\n  ].join(',');\r\n\r\n// importer\r\n// highlander object to manage loading of imports\r\n// for any document, importer:\r\n// - loads any linked import documents (with deduping)\r\n// - whenever an import is loaded, prompts the parser to try to parse\r\n// - observes imported documents for new elements (these are handled via the\r\n// dynamic importer)\r\nvar importer = {\r\n\r\n  documents: {},\r\n\r\n  // nodes to load in the mian document\r\n  documentPreloadSelectors: IMPORT_SELECTOR,\r\n\r\n  // nodes to load in imports\r\n  importsPreloadSelectors: [\r\n    IMPORT_SELECTOR\r\n  ].join(','),\r\n\r\n  loadNode: function(node) {\r\n    importLoader.addNode(node);\r\n  },\r\n\r\n  // load all loadable elements within the parent element\r\n  loadSubtree: function(parent) {\r\n    var nodes = this.marshalNodes(parent);\r\n    // add these nodes to loader's queue\r\n    importLoader.addNodes(nodes);\r\n  },\r\n\r\n  marshalNodes: function(parent) {\r\n    // all preloadable nodes in inDocument\r\n    return parent.querySelectorAll(this.loadSelectorsForNode(parent));\r\n  },\r\n\r\n  // find the proper set of load selectors for a given node\r\n  loadSelectorsForNode: function(node) {\r\n    var doc = node.ownerDocument || node;\r\n    return doc === rootDocument ? this.documentPreloadSelectors :\r\n        this.importsPreloadSelectors;\r\n  },\r\n\r\n  loaded: function(url, elt, resource, err, redirectedUrl) {\r\n    flags.log && console.log('loaded', url, elt);\r\n    // store generic resource\r\n    // TODO(sorvell): fails for nodes inside <template>.content\r\n    // see https://code.google.com/p/chromium/issues/detail?id=249381.\r\n    elt.__resource = resource;\r\n    elt.__error = err;\r\n    if (isImportLink(elt)) {\r\n      var doc = this.documents[url];\r\n      // if we've never seen a document at this url\r\n      if (doc === undefined) {\r\n        // generate an HTMLDocument from data\r\n        doc = err ? null : makeDocument(resource, redirectedUrl || url);\r\n        if (doc) {\r\n          doc.__importLink = elt;\r\n          // note, we cannot use MO to detect parsed nodes because\r\n          // SD polyfill does not report these as mutations.\r\n          this.bootDocument(doc);\r\n        }\r\n        // cache document\r\n        this.documents[url] = doc;\r\n      }\r\n      // don't store import record until we're actually loaded\r\n      // store document resource\r\n      elt.__doc = doc;\r\n    }\r\n  },\r\n\r\n  bootDocument: function(doc) {\r\n    this.loadSubtree(doc);\r\n  },\r\n\r\n  loadedAll: function() {\r\n    this._flatten(document);\r\n    runScripts();\r\n    this._fireEvents(document);\r\n    this.observe(document.head);\r\n  },\r\n\r\n  _flatten: function(element) {\r\n    var n$ = element.querySelectorAll(IMPORT_SELECTOR);\r\n    for (var i=0; i < n$.length; i++) {\r\n      var n = n$[i];\r\n      n.import = this.documents[n.href];\r\n      if (n.import && !n.import.__firstImport) {\r\n        n.import.__firstImport = n;\r\n        this._flatten(n.import);\r\n        if (!n.import.parentNode) {\r\n          n.parentNode.insertBefore(n.import, n);\r\n          if (document.contains(n.parentNode)) {\r\n            // TODO(sorvell): need to coordinate with observer in document.head.\r\n            //this.observe(n.import);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _fireEvents: function(element) {\r\n    var n$ = element.querySelectorAll(IMPORT_SELECTOR);\r\n    for (var i=0; i < n$.length; i++) {\r\n      var n = n$[i];\r\n      if (!n.__loaded) {\r\n        flags.log && console.warn('fire', n.import ? 'load' : 'error', n.href);\r\n        n.__loaded = true;\r\n        n.dispatchEvent(new CustomEvent(n.import ? 'load' : 'error'));\r\n      }\r\n    }\r\n  },\r\n\r\n  observe: function(element) {\r\n    if (!element.__importObserver) {\r\n      element.__importObserver = new MutationObserver(function (mxns) {\r\n        mxns.forEach(function(m) {\r\n          if (m.addedNodes) {\r\n            for (var i=0; i < m.addedNodes.length; i++) {\r\n              var p = m.addedNodes[i];\r\n              // TODO(sorvell): x-platform matches\r\n              if (p.nodeType === Node.ELEMENT_NODE &&\r\n                  p.matches(IMPORT_SELECTOR)) {\r\n                importer.loadNode(p);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n      element.__importObserver.observe(element, {childList: true, subtree: true});\r\n    }\r\n  }\r\n\r\n};\r\n\r\n// loader singleton to handle loading imports\r\nvar importLoader = new Loader(importer.loaded.bind(importer),\r\n    importer.loadedAll.bind(importer));\r\n\r\nfunction isImportLink(elt) {\r\n  return isLinkRel(elt, IMPORT_LINK_TYPE);\r\n}\r\n\r\nfunction isLinkRel(elt, rel) {\r\n  return elt.localName === 'link' && elt.getAttribute('rel') === rel;\r\n}\r\n\r\nfunction hasBaseURIAccessor(doc) {\r\n  return !! Object.getOwnPropertyDescriptor(doc, 'baseURI');\r\n}\r\n\r\n/********************* vulcanize style inline processing  *********************/\r\nvar attrs = ['action', 'src', 'href', 'url', 'style'];\r\nfunction fixUrlAttributes(element, base) {\r\n  for (var i=0, l=attrs.length, a, at, v; (i<l) && (a=attrs[i]); i++) {\r\n    at = element.attributes[a];\r\n    v = at && at.value;\r\n    if (v && (v.search(/({{|\\[\\[)/) < 0)) {\r\n      at.value = (a === 'style') ?\r\n        path.resolveUrlsInCssText(v, base) :\r\n        path.replaceAttrUrl(v, base);\r\n    }\r\n  }\r\n}\r\n\r\nfunction fixUrlsInTemplate(template, base) {\r\n  var content = template.content;\r\n  var n$ = content.querySelectorAll('style, form[action], [src], [href], [url], [style]');\r\n  for (var i=0; i < n$.length; i++) {\r\n    var n = n$[i];\r\n    if (n.localName == 'style') {\r\n      path.resolveUrlsInStyle(n, base);\r\n    } else {\r\n      fixUrlAttributes(n, base);\r\n    }\r\n  }\r\n  fixUrlsInTemplates(content, base);\r\n}\r\n\r\nfunction fixUrlsInTemplates(element, base) {\r\n  var t$ = element.querySelectorAll('template');\r\n  for (var i=0; i < t$.length; i++) {\r\n    fixUrlsInTemplate(t$[i], base);\r\n  }\r\n}\r\n\r\nfunction fixUrls(element, base) {\r\n  var n$ = element.querySelectorAll(importsSelectors);\r\n  for (var i=0; i < n$.length; i++) {\r\n    var n = n$[i];\r\n    if (n.href) {\r\n      n.href = new URL(n.getAttribute('href'), base);\r\n    }\r\n    if (n.src) {\r\n      n.src = new URL(n.getAttribute('src'), base);\r\n    }\r\n    if (n.localName == 'style') {\r\n      path.resolveUrlsInStyle(n, base);\r\n    }\r\n  }\r\n  fixUrlsInTemplates(element, base);\r\n}\r\n\r\nvar scriptType = \"import-pending\";\r\n\r\nfunction markScripts(element, url) {\r\n  var s$ = element.querySelectorAll('script:not(type)');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    o.type = scriptType;\r\n    o.__baseURI = url;\r\n  }\r\n}\r\n\r\nfunction runScripts() {\r\n  var s$ = document.querySelectorAll('import-content script[type=' + scriptType + ']');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    var c = document.createElement('script');\r\n    if (o.textContent) {\r\n      c.textContent = o.textContent + '\\n//# sourceURL=' +\r\n        o.__baseURI + (s$.length > 1 ? i : '') + '.js';\r\n    }\r\n    if (o.src) {\r\n      c.setAttribute('src', o.getAttribute('src'));\r\n    }\r\n    o.parentNode.replaceChild(c, o);\r\n  }\r\n}\r\n\r\nfunction fixDomModules(element, url) {\r\n  var s$ = element.querySelectorAll('dom-module');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    var assetpath = o.getAttribute('assetpath') || '';\r\n    o.setAttribute('assetpath', path.replaceAttrUrl(assetpath, url));\r\n  }\r\n}\r\n\r\nfunction makeDocument(resource, url) {\r\n  var content = document.createElement('import-content');\r\n  content.setAttribute('import-href', url);\r\n  content.style.display = 'none';\r\n  content.innerHTML = resource;\r\n  markScripts(content, url);\r\n  // TODO(sorvell): this is specific to users (Polymer) of the dom-module element.\r\n  fixDomModules(content, url);\r\n  fixUrls(content, url);\r\n  return content;\r\n}\r\n\r\n/**\r\n  Add support for the `HTMLImportsLoaded` event and the `HTMLImports.whenReady`\r\n  method. This api is necessary because unlike the native implementation,\r\n  script elements do not force imports to resolve. Instead, users should wrap\r\n  code in either an `HTMLImportsLoaded` handler or after load time in an\r\n  `HTMLImports.whenReady(callback)` call.\r\n\r\n  NOTE: This module also supports these apis under the native implementation.\r\n  Therefore, if this file is loaded, the same code can be used under both\r\n  the polyfill and native implementation.\r\n */\r\n\r\nvar isIE = /Trident/.test(navigator.userAgent);\r\n\r\n// call a callback when all HTMLImports in the document at call time\r\n// (or at least document ready) have loaded.\r\n// 1. ensure the document is in a ready state (has dom), then\r\n// 2. watch for loading of imports and call callback when done\r\nfunction whenReady(callback, doc) {\r\n  doc = doc || rootDocument;\r\n  // if document is loading, wait and try again\r\n  whenDocumentReady(function() {\r\n    watchImportsLoad(callback, doc);\r\n  }, doc);\r\n}\r\n\r\n// call the callback when the document is in a ready state (has dom)\r\nvar requiredReadyState = isIE ? 'complete' : 'interactive';\r\nvar READY_EVENT = 'readystatechange';\r\nfunction isDocumentReady(doc) {\r\n  return (doc.readyState === 'complete' ||\r\n      doc.readyState === requiredReadyState);\r\n}\r\n\r\n// call <callback> when we ensure the document is in a ready state\r\nfunction whenDocumentReady(callback, doc) {\r\n  if (!isDocumentReady(doc)) {\r\n    var checkReady = function() {\r\n      if (doc.readyState === 'complete' ||\r\n          doc.readyState === requiredReadyState) {\r\n        doc.removeEventListener(READY_EVENT, checkReady);\r\n        whenDocumentReady(callback, doc);\r\n      }\r\n    };\r\n    doc.addEventListener(READY_EVENT, checkReady);\r\n  } else if (callback) {\r\n    callback();\r\n  }\r\n}\r\n\r\nfunction markTargetLoaded(event) {\r\n  event.target.__loaded = true;\r\n}\r\n\r\n// call <callback> when we ensure all imports have loaded\r\nfunction watchImportsLoad(callback, doc) {\r\n  var imports = doc.querySelectorAll(IMPORT_SELECTOR);\r\n  // only non-nested imports\r\n  imports = Array.prototype.slice.call(imports).filter(function(n) {\r\n    return !n.matches('import-content ' + IMPORT_SELECTOR);\r\n  });\r\n  var parsedCount = 0, importCount = imports.length, newImports = [], errorImports = [];\r\n  function checkDone() {\r\n    if (parsedCount == importCount && callback) {\r\n      callback({\r\n        allImports: imports,\r\n        loadedImports: newImports,\r\n        errorImports: errorImports\r\n      });\r\n    }\r\n  }\r\n  function loadedImport(e) {\r\n    markTargetLoaded(e);\r\n    newImports.push(this);\r\n    parsedCount++;\r\n    checkDone();\r\n  }\r\n  function errorLoadingImport(e) {\r\n    errorImports.push(this);\r\n    parsedCount++;\r\n    checkDone();\r\n  }\r\n  if (importCount) {\r\n    for (var i=0, imp; i<importCount && (imp=imports[i]); i++) {\r\n      if (isImportLoaded(imp)) {\r\n        newImports.push(this);\r\n        parsedCount++;\r\n        checkDone();\r\n      } else {\r\n        imp.addEventListener('load', loadedImport);\r\n        imp.addEventListener('error', errorLoadingImport);\r\n      }\r\n    }\r\n  } else {\r\n    checkDone();\r\n  }\r\n}\r\n\r\nfunction isImportLoaded(link) {\r\n  return useNative ? link.__loaded ||\r\n      (link.import && link.import.readyState !== 'loading') :\r\n      link.__loaded;\r\n}\r\n\r\n// make `whenReady` work with native HTMLImports\r\nif (useNative) {\r\n  new MutationObserver(function(mxns) {\r\n    for (var i=0, l=mxns.length, m; (i < l) && (m=mxns[i]); i++) {\r\n      if (m.addedNodes) {\r\n        handleImports(m.addedNodes);\r\n      }\r\n    }\r\n  }).observe(document.head, {childList: true});\r\n\r\n  function handleImports(nodes) {\r\n    for (var i=0, l=nodes.length, n; (i<l) && (n=nodes[i]); i++) {\r\n      if (isImport(n)) {\r\n        handleImport(n);\r\n      }\r\n    }\r\n  }\r\n\r\n  function isImport(element) {\r\n    return element.localName === 'link' && element.rel === 'import';\r\n  }\r\n\r\n  function handleImport(element) {\r\n    var loaded = element.import;\r\n    if (loaded) {\r\n      markTargetLoaded({target: element});\r\n    } else {\r\n      element.addEventListener('load', markTargetLoaded);\r\n      element.addEventListener('error', markTargetLoaded);\r\n    }\r\n  }\r\n\r\n  // make sure to catch any imports that are in the process of loading\r\n  // when this script is run.\r\n  (function() {\r\n    if (document.readyState === 'loading') {\r\n      var imports = document.querySelectorAll('link[rel=import]');\r\n      for (var i=0, l=imports.length, imp; (i<l) && (imp=imports[i]); i++) {\r\n        handleImport(imp);\r\n      }\r\n    }\r\n  })();\r\n\r\n}\r\n\r\n// Fire the 'HTMLImportsLoaded' event when imports in document at load time\r\n// have loaded. This event is required to simulate the script blocking\r\n// behavior of native imports. A main document script that needs to be sure\r\n// imports have loaded should wait for this event.\r\nwhenReady(function(detail) {\r\n  scope.ready = true;\r\n  scope.readyTime = new Date().getTime();\r\n  var evt = rootDocument.createEvent(\"CustomEvent\");\r\n  evt.initCustomEvent(\"HTMLImportsLoaded\", true, true, detail);\r\n  rootDocument.dispatchEvent(evt);\r\n});\r\n\r\n// Polyfill document.baseURI for browsers without it.\r\nif (!document.baseURI) {\r\n  var baseURIDescriptor = {\r\n    get: function() {\r\n      var base = document.querySelector('base');\r\n      return base ? base.href : window.location.href;\r\n    },\r\n    configurable: true\r\n  };\r\n\r\n  Object.defineProperty(document, 'baseURI', baseURIDescriptor);\r\n  Object.defineProperty(rootDocument, 'baseURI', baseURIDescriptor);\r\n}\r\n\r\nif (!useNative) {\r\n  function bootstrap() {\r\n    importer.bootDocument(document);\r\n  }\r\n\r\n  if (document.readyState === 'complete' ||\r\n      (document.readyState === 'interactive' && !window.attachEvent)) {\r\n    bootstrap();\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', bootstrap);\r\n  }\r\n}\r\n\r\n// exports\r\nscope.useNative = useNative;\r\nscope.whenReady = whenReady;\r\n\r\n})(window.HTMLImports = (window.HTMLImports || {}));"]}