{"version":3,"sources":["src/html-imports.js"],"names":["scope","Loader","onLoad","onComplete","cache","onload","oncomplete","inflight","pending","fixUrlsInTemplates","element","base","t$","querySelectorAll","i","length","content","template","n$","n","localName","path","resolveUrlsInStyle","l","attrs","a","at","v","attributes","value","search","resolveUrlsInCssText","replaceAttrUrl","whenReady","callback","doc","rootDocument","whenDocumentReady","watchImportsLoad","readyState","requiredReadyState","checkReady","removeEventListener","READY_EVENT","addEventListener","markTargetLoaded","event","target","__loaded","checkDone","parsedCount","importCount","scripts","window","requestAnimationFrame","allImports","imports","loadedImports","newImports","errorImports","loadedImport","e","push","errorLoadingImport","IMPORT_SELECTOR","Array","prototype","slice","call","filter","matches","imp","useNative","import","IMPORT_LINK_TYPE","document","createElement","hasShadowDOMPolyfill","ShadowDOMPolyfill","wrapIfNeeded","currentScriptDescriptor","get","script","currentScript","node","configurable","Object","defineProperty","ABS_URL_TEST","CSS_URL_REGEXP","CSS_IMPORT_REGEXP","style","linkUrl","textContent","cssText","r","replaceUrls","text","regexp","replace","m","pre","url","post","urlPath","href","URL","test","xhr","async","ok","request","status","load","next","nextContext","XMLHttpRequest","open","redirectedUrl","locationHeader","getResponseHeader","substr","location","origin","console","error","message","response","responseText","send","loadDocument","responseType","addNodes","nodes","require","addNode","elt","src","dedupe","fetch","tail","match","pieces","split","body","header","indexOf","atob","decodeURIComponent","setTimeout","receive","bind","err","resource","$p","p","importer","documents","documentPreloadSelectors","importsPreloadSelectors","loadNode","importLoader","loadSubtree","parent","marshalNodes","loadSelectorsForNode","ownerDocument","loaded","__resource","__error","getAttribute","undefined","setAttribute","display","innerHTML","s$","o","type","scriptType","__baseURI","assetpath","importsSelectors","__importLink","bootDocument","__doc","loadedAll","_flatten","c","parentNode","replaceChild","_fireEvents","observe","head","__firstImport","appendChild","dispatchEvent","CustomEvent","__importObserver","MutationObserver","mxns","forEach","addedNodes","nodeType","Node","ELEMENT_NODE","childList","subtree","isIE","navigator","userAgent","handleImport","rel","detail","ready","readyTime","getTime","Date","evt","createEvent","initCustomEvent","baseURI","baseURIDescriptor","querySelector","bootstrap","attachEvent","HTMLImports"],"mappings":"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","file":"html-imports.min.js","sourcesContent":["/**\r\n * @license\r\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\r\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n * Code distributed by Google as part of the polymer project is also\r\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n */\r\n(function(scope) {\r\n\r\n/********************* base setup *********************/\r\nvar IMPORT_LINK_TYPE = 'import';\r\nvar IMPORT_SELECTOR = 'link[rel=' + IMPORT_LINK_TYPE + ']';\r\nvar useNative = Boolean(IMPORT_LINK_TYPE in document.createElement('link'));\r\nvar flags = {bust: false, log: false};\r\n\r\n/**\r\n  Support `currentScript` on all browsers as `document._currentScript.`\r\n\r\n  NOTE: We cannot polyfill `document.currentScript` because it's not possible\r\n  both to override and maintain the ability to capture the native value.\r\n  Therefore we choose to expose `_currentScript` both when native imports\r\n  and the polyfill are in use.\r\n*/\r\n// NOTE: ShadowDOMPolyfill intrusion.\r\nvar hasShadowDOMPolyfill = Boolean(window.ShadowDOMPolyfill);\r\nvar wrap = function(node) {\r\n  return hasShadowDOMPolyfill ? window.ShadowDOMPolyfill.wrapIfNeeded(node) : node;\r\n};\r\nvar rootDocument = wrap(document);\r\n\r\nvar currentScriptDescriptor = {\r\n  get: function() {\r\n    var script = scope.currentScript || document.currentScript ||\r\n        // NOTE: only works when called in synchronously executing code.\r\n        // readyState should check if `loading` but IE10 is\r\n        // interactive when scripts run so we cheat.\r\n        (document.readyState !== 'complete' ?\r\n        document.scripts[document.scripts.length - 1] : null);\r\n    return wrap(script);\r\n  },\r\n  configurable: true\r\n};\r\n\r\nObject.defineProperty(document, '_currentScript', currentScriptDescriptor);\r\nObject.defineProperty(rootDocument, '_currentScript', currentScriptDescriptor);\r\n\r\n/********************* path fixup *********************/\r\nvar ABS_URL_TEST = /(^\\/)|(^#)|(^[\\w-\\d]*:)/;\r\nvar CSS_URL_REGEXP = /(url\\()([^)]*)(\\))/g;\r\nvar CSS_IMPORT_REGEXP = /(@import[\\s]+(?!url\\())([^;]*)(;)/g;\r\n\r\n// path fixup: style elements in imports must be made relative to the main\r\n// document. We fixup url's in url() and @import.\r\nvar path = {\r\n\r\n  resolveUrlsInStyle: function(style, linkUrl) {\r\n    style.textContent = this.resolveUrlsInCssText(style.textContent, linkUrl);\r\n  },\r\n\r\n  resolveUrlsInCssText: function(cssText, linkUrl) {\r\n    var r = this.replaceUrls(cssText, linkUrl, CSS_URL_REGEXP);\r\n    r = this.replaceUrls(r, linkUrl, CSS_IMPORT_REGEXP);\r\n    return r;\r\n  },\r\n\r\n  replaceUrls: function(text, linkUrl, regexp) {\r\n    return text.replace(regexp, function(m, pre, url, post) {\r\n      var urlPath = url.replace(/[\"']/g, '');\r\n      if (linkUrl) {\r\n        urlPath = (new URL(urlPath, linkUrl)).href;\r\n      }\r\n      return pre + '\\'' + urlPath + '\\'' + post;\r\n    });\r\n  },\r\n\r\n  replaceAttrUrl: function(text, linkUrl) {\r\n    if (text && ABS_URL_TEST.test(text)) {\r\n      return text;\r\n    } else {\r\n      return new URL(text, linkUrl).href;\r\n    }\r\n  }\r\n\r\n};\r\n\r\n/********************* xhr processor *********************/\r\nvar xhr = {\r\n  async: true,\r\n\r\n  ok: function(request) {\r\n    return (request.status >= 200 && request.status < 300)\r\n        || (request.status === 304)\r\n        || (request.status === 0);\r\n  },\r\n\r\n  load: function(url, next, nextContext) {\r\n    var request = new XMLHttpRequest();\r\n    if (flags.bust) {\r\n      url += '?' + Math.random();\r\n    }\r\n    request.open('GET', url, xhr.async);\r\n    request.addEventListener('readystatechange', function(e) {\r\n      if (request.readyState === 4) {\r\n        // Servers redirecting an import can add a Location header to help us\r\n        // polyfill correctly.\r\n        var redirectedUrl = null;\r\n        try {\r\n          var locationHeader = request.getResponseHeader(\"Location\");\r\n          if (locationHeader) {\r\n            redirectedUrl = (locationHeader.substr( 0, 1 ) === \"/\")\r\n              ? location.origin + locationHeader  // Location is a relative path\r\n              : locationHeader;                   // Full path\r\n          }\r\n        } catch ( e ) {\r\n            console.error( e.message );\r\n        }\r\n        next.call(nextContext, !xhr.ok(request) && request,\r\n            request.response || request.responseText, redirectedUrl);\r\n      }\r\n    });\r\n    request.send();\r\n    return request;\r\n  },\r\n\r\n  loadDocument: function(url, next, nextContext) {\r\n    this.load(url, next, nextContext).responseType = 'document';\r\n  }\r\n\r\n};\r\n\r\n/********************* loader *********************/\r\n// This loader supports a dynamic list of urls\r\n// and an oncomplete callback that is called when the loader is done.\r\n// NOTE: The polyfill currently does *not* need this dynamism or the\r\n// onComplete concept. Because of this, the loader could be simplified\r\n// quite a bit.\r\nvar Loader = function(onLoad, onComplete) {\r\n  this.cache = {};\r\n  this.onload = onLoad;\r\n  this.oncomplete = onComplete;\r\n  this.inflight = 0;\r\n  this.pending = {};\r\n};\r\n\r\nLoader.prototype = {\r\n\r\n  addNodes: function(nodes) {\r\n    // number of transactions to complete\r\n    this.inflight += nodes.length;\r\n    // commence transactions\r\n    for (var i=0, l=nodes.length, n; (i<l) && (n=nodes[i]); i++) {\r\n      this.require(n);\r\n    }\r\n    // anything to do?\r\n    this.checkDone();\r\n  },\r\n\r\n  addNode: function(node) {\r\n    // number of transactions to complete\r\n    this.inflight++;\r\n    // commence transactions\r\n    this.require(node);\r\n    // anything to do?\r\n    this.checkDone();\r\n  },\r\n\r\n  require: function(elt) {\r\n    var url = elt.src || elt.href;\r\n    // deduplication\r\n    if (!this.dedupe(url, elt)) {\r\n      // fetch this resource\r\n      this.fetch(url, elt);\r\n    }\r\n  },\r\n\r\n  dedupe: function(url, elt) {\r\n    if (this.pending[url]) {\r\n      // add to list of nodes waiting for inUrl\r\n      this.pending[url].push(elt);\r\n      // don't need fetch\r\n      return true;\r\n    }\r\n    var resource;\r\n    if (this.cache[url]) {\r\n      this.onload(url, elt, this.cache[url]);\r\n      // finished this transaction\r\n      this.tail();\r\n      // don't need fetch\r\n      return true;\r\n    }\r\n    // first node waiting for inUrl\r\n    this.pending[url] = [elt];\r\n    // need fetch (not a dupe)\r\n    return false;\r\n  },\r\n\r\n  fetch: function(url, elt) {\r\n    flags.log && console.log('fetch', url, elt);\r\n    if (!url) {\r\n      setTimeout(this.receive.bind(this, url, elt, {\r\n        error: 'href must be specified'\r\n      }, null), 0);\r\n    } else if (url.match(/^data:/)) {\r\n      // Handle Data URI Scheme\r\n      var pieces = url.split(',');\r\n      var header = pieces[0];\r\n      var body = pieces[1];\r\n      if(header.indexOf(';base64') > -1) {\r\n        body = atob(body);\r\n      } else {\r\n        body = decodeURIComponent(body);\r\n      }\r\n      setTimeout(this.receive.bind(this, url, elt, null, body), 0);\r\n    } else {\r\n      xhr.load(url, this.receive.bind(this, url, elt));\r\n    }\r\n  },\r\n\r\n  receive: function(url, elt, err, resource, redirectedUrl) {\r\n    this.cache[url] = resource;\r\n    var $p = this.pending[url];\r\n    for (var i=0, l=$p.length, p; (i<l) && (p=$p[i]); i++) {\r\n      // If url was redirected, use the redirected location so paths are\r\n      // calculated relative to that.\r\n      this.onload(url, p, resource, err, redirectedUrl);\r\n      this.tail();\r\n    }\r\n    this.pending[url] = null;\r\n  },\r\n\r\n  tail: function() {\r\n    --this.inflight;\r\n    this.checkDone();\r\n  },\r\n\r\n  checkDone: function() {\r\n    if (!this.inflight) {\r\n      this.oncomplete();\r\n    }\r\n  }\r\n};\r\n\r\n/********************* importer *********************/\r\nvar importsSelectors = [\r\n    IMPORT_SELECTOR,\r\n    'link[rel=stylesheet]:not([type])',\r\n    'style:not([type])',\r\n    'script:not([type])',\r\n    'script[type=\"application/javascript\"]',\r\n    'script[type=\"text/javascript\"]'\r\n  ].join(',');\r\n\r\n// importer\r\n// highlander object to manage loading of imports\r\n// for any document, importer:\r\n// - loads any linked import documents (with deduping)\r\n// - whenever an import is loaded, prompts the parser to try to parse\r\n// - observes imported documents for new elements (these are handled via the\r\n// dynamic importer)\r\nvar importer = {\r\n\r\n  documents: {},\r\n\r\n  // nodes to load in the mian document\r\n  documentPreloadSelectors: IMPORT_SELECTOR,\r\n\r\n  // nodes to load in imports\r\n  importsPreloadSelectors: [\r\n    IMPORT_SELECTOR\r\n  ].join(','),\r\n\r\n  loadNode: function(node) {\r\n    importLoader.addNode(node);\r\n  },\r\n\r\n  // load all loadable elements within the parent element\r\n  loadSubtree: function(parent) {\r\n    var nodes = this.marshalNodes(parent);\r\n    // add these nodes to loader's queue\r\n    importLoader.addNodes(nodes);\r\n  },\r\n\r\n  marshalNodes: function(parent) {\r\n    // all preloadable nodes in inDocument\r\n    return parent.querySelectorAll(this.loadSelectorsForNode(parent));\r\n  },\r\n\r\n  // find the proper set of load selectors for a given node\r\n  loadSelectorsForNode: function(node) {\r\n    var doc = node.ownerDocument || node;\r\n    return doc === rootDocument ? this.documentPreloadSelectors :\r\n        this.importsPreloadSelectors;\r\n  },\r\n\r\n  loaded: function(url, elt, resource, err, redirectedUrl) {\r\n    flags.log && console.log('loaded', url, elt);\r\n    // store generic resource\r\n    // TODO(sorvell): fails for nodes inside <template>.content\r\n    // see https://code.google.com/p/chromium/issues/detail?id=249381.\r\n    elt.__resource = resource;\r\n    elt.__error = err;\r\n    if (isImportLink(elt)) {\r\n      var doc = this.documents[url];\r\n      // if we've never seen a document at this url\r\n      if (doc === undefined) {\r\n        // generate an HTMLDocument from data\r\n        doc = err ? null : makeDocument(resource, redirectedUrl || url);\r\n        if (doc) {\r\n          doc.__importLink = elt;\r\n          // note, we cannot use MO to detect parsed nodes because\r\n          // SD polyfill does not report these as mutations.\r\n          this.bootDocument(doc);\r\n        }\r\n        // cache document\r\n        this.documents[url] = doc;\r\n      }\r\n      // don't store import record until we're actually loaded\r\n      // store document resource\r\n      elt.__doc = doc;\r\n    }\r\n  },\r\n\r\n  bootDocument: function(doc) {\r\n    this.loadSubtree(doc);\r\n  },\r\n\r\n  loadedAll: function() {\r\n    this._flatten(document);\r\n    runScripts();\r\n    this._fireEvents(document);\r\n    this.observe(document.head);\r\n  },\r\n\r\n  _flatten: function(element) {\r\n    var n$ = element.querySelectorAll(IMPORT_SELECTOR);\r\n    for (var i=0; i < n$.length; i++) {\r\n      var n = n$[i];\r\n      n.import = this.documents[n.href];\r\n      if (n.import && !n.import.__firstImport) {\r\n        n.import.__firstImport = n;\r\n        this._flatten(n.import);\r\n        if (!n.import.parentNode) {\r\n          n.appendChild(n.import);\r\n          if (document.contains(n.parentNode)) {\r\n            // TODO(sorvell): need to coordinate with observer in document.head.\r\n            //this.observe(n.import);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n// TODO(valdrin): if possible, fire in same order as native imports which is\r\n// probably bottom up.\r\n  _fireEvents: function(element) {\r\n    var n$ = element.querySelectorAll(IMPORT_SELECTOR);\r\n    for (var i=0; i < n$.length; i++) {\r\n      var n = n$[i];\r\n      if (!n.__loaded) {\r\n        flags.log && console.warn('fire', n.import ? 'load' : 'error', n.href);\r\n        n.__loaded = true;\r\n        n.dispatchEvent(new CustomEvent(n.import ? 'load' : 'error'));\r\n      }\r\n    }\r\n  },\r\n\r\n  observe: function(element) {\r\n    if (!element.__importObserver) {\r\n      element.__importObserver = new MutationObserver(function (mxns) {\r\n        mxns.forEach(function(m) {\r\n          if (m.addedNodes) {\r\n            for (var i=0; i < m.addedNodes.length; i++) {\r\n              var p = m.addedNodes[i];\r\n              // TODO(sorvell): x-platform matches\r\n              if (p.nodeType === Node.ELEMENT_NODE &&\r\n                  p.matches(IMPORT_SELECTOR)) {\r\n                importer.loadNode(p);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n      element.__importObserver.observe(element, {childList: true, subtree: true});\r\n    }\r\n  }\r\n\r\n};\r\n\r\n// loader singleton to handle loading imports\r\nvar importLoader = new Loader(importer.loaded.bind(importer),\r\n    importer.loadedAll.bind(importer));\r\n\r\nfunction isImportLink(elt) {\r\n  return isLinkRel(elt, IMPORT_LINK_TYPE);\r\n}\r\n\r\nfunction isLinkRel(elt, rel) {\r\n  return elt.localName === 'link' && elt.getAttribute('rel') === rel;\r\n}\r\n\r\nfunction hasBaseURIAccessor(doc) {\r\n  return !! Object.getOwnPropertyDescriptor(doc, 'baseURI');\r\n}\r\n\r\n/********************* vulcanize style inline processing  *********************/\r\nvar attrs = ['action', 'src', 'href', 'url', 'style'];\r\nfunction fixUrlAttributes(element, base) {\r\n  for (var i=0, l=attrs.length, a, at, v; (i<l) && (a=attrs[i]); i++) {\r\n    at = element.attributes[a];\r\n    v = at && at.value;\r\n    if (v && (v.search(/({{|\\[\\[)/) < 0)) {\r\n      at.value = (a === 'style') ?\r\n        path.resolveUrlsInCssText(v, base) :\r\n        path.replaceAttrUrl(v, base);\r\n    }\r\n  }\r\n}\r\n\r\nfunction fixUrlsInTemplate(template, base) {\r\n  var content = template.content;\r\n  var n$ = content.querySelectorAll('style, form[action], [src], [href], [url], [style]');\r\n  for (var i=0; i < n$.length; i++) {\r\n    var n = n$[i];\r\n    if (n.localName == 'style') {\r\n      path.resolveUrlsInStyle(n, base);\r\n    } else {\r\n      fixUrlAttributes(n, base);\r\n    }\r\n  }\r\n  fixUrlsInTemplates(content, base);\r\n}\r\n\r\nfunction fixUrlsInTemplates(element, base) {\r\n  var t$ = element.querySelectorAll('template');\r\n  for (var i=0; i < t$.length; i++) {\r\n    fixUrlsInTemplate(t$[i], base);\r\n  }\r\n}\r\n\r\nfunction fixUrls(element, base) {\r\n  var n$ = element.querySelectorAll(importsSelectors);\r\n  for (var i=0; i < n$.length; i++) {\r\n    var n = n$[i];\r\n    if (n.href) {\r\n      n.href = new URL(n.getAttribute('href'), base);\r\n    }\r\n    if (n.src) {\r\n      n.src = new URL(n.getAttribute('src'), base);\r\n    }\r\n    if (n.localName == 'style') {\r\n      path.resolveUrlsInStyle(n, base);\r\n    }\r\n  }\r\n  fixUrlsInTemplates(element, base);\r\n}\r\n\r\nvar scriptType = \"import-pending\";\r\n\r\nfunction markScripts(element, url) {\r\n  var s$ = element.querySelectorAll('script:not(type)');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    o.type = scriptType;\r\n    o.__baseURI = url;\r\n  }\r\n}\r\n\r\n// done for security reasons. TODO(valdrin) document\r\nfunction runScripts() {\r\n  var s$ = document.querySelectorAll('import-content script[type=' + scriptType + ']');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    var c = document.createElement('script');\r\n    if (o.textContent) {\r\n      c.textContent = o.textContent + '\\n//# sourceURL=' +\r\n        o.__baseURI + (s$.length > 1 ? i : '') + '.js';\r\n    }\r\n    if (o.src) {\r\n      var src = path.replaceAttrUrl(o.getAttribute('src'), o.__baseURI);\r\n      c.setAttribute('src', src);\r\n    }\r\n    o.parentNode.replaceChild(c, o);\r\n  }\r\n}\r\n\r\nfunction fixDomModules(element, url) {\r\n  var s$ = element.querySelectorAll('dom-module');\r\n  for (var i=0; i < s$.length; i++) {\r\n    var o = s$[i];\r\n    var assetpath = o.getAttribute('assetpath') || '';\r\n    o.setAttribute('assetpath', path.replaceAttrUrl(assetpath, url));\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction makeDocument(resource, url) {\r\n  // TODO(valdrin): better to use a disconnected document here so that\r\n  // elements don't upgrade until inserted into main document,\r\n  // however, this is blocked on https://bugs.webkit.org/show_bug.cgi?id=165617\r\n  // let doc = document.implementation.createHTMLDocument();\r\n  var content = document.createElement('import-content');\r\n  content.setAttribute('import-href', url);\r\n  content.style.display = 'none';\r\n  content.innerHTML = resource;\r\n  markScripts(content, url);\r\n  // TODO(sorvell): this is specific to users (Polymer) of the dom-module element.\r\n  fixDomModules(content, url);\r\n  fixUrls(content, url);\r\n  return content;\r\n}\r\n\r\n/**\r\n  Add support for the `HTMLImportsLoaded` event and the `HTMLImports.whenReady`\r\n  method. This api is necessary because unlike the native implementation,\r\n  script elements do not force imports to resolve. Instead, users should wrap\r\n  code in either an `HTMLImportsLoaded` handler or after load time in an\r\n  `HTMLImports.whenReady(callback)` call.\r\n\r\n  NOTE: This module also supports these apis under the native implementation.\r\n  Therefore, if this file is loaded, the same code can be used under both\r\n  the polyfill and native implementation.\r\n */\r\n\r\nvar isIE = /Trident/.test(navigator.userAgent);\r\n\r\n// call a callback when all HTMLImports in the document at call time\r\n// (or at least document ready) have loaded.\r\n// 1. ensure the document is in a ready state (has dom), then\r\n// 2. watch for loading of imports and call callback when done\r\nfunction whenReady(callback, doc) {\r\n  doc = doc || rootDocument;\r\n  // if document is loading, wait and try again\r\n  whenDocumentReady(function() {\r\n    watchImportsLoad(callback, doc);\r\n  }, doc);\r\n}\r\n\r\n// call the callback when the document is in a ready state (has dom)\r\nvar requiredReadyState = isIE ? 'complete' : 'interactive';\r\nvar READY_EVENT = 'readystatechange';\r\nfunction isDocumentReady(doc) {\r\n  return (doc.readyState === 'complete' ||\r\n      doc.readyState === requiredReadyState);\r\n}\r\n\r\n// call <callback> when we ensure the document is in a ready state\r\nfunction whenDocumentReady(callback, doc) {\r\n  if (!isDocumentReady(doc)) {\r\n    var checkReady = function() {\r\n      if (doc.readyState === 'complete' ||\r\n          doc.readyState === requiredReadyState) {\r\n        doc.removeEventListener(READY_EVENT, checkReady);\r\n        whenDocumentReady(callback, doc);\r\n      }\r\n    };\r\n    doc.addEventListener(READY_EVENT, checkReady);\r\n  } else if (callback) {\r\n    callback();\r\n  }\r\n}\r\n\r\nfunction markTargetLoaded(event) {\r\n  event.target.__loaded = true;\r\n}\r\n\r\n// call <callback> when we ensure all imports have loaded\r\nfunction watchImportsLoad(callback, doc) {\r\n  var imports = doc.querySelectorAll(IMPORT_SELECTOR);\r\n  // only non-nested imports\r\n  imports = Array.prototype.slice.call(imports).filter(function(n) {\r\n    return !n.matches('import-content ' + IMPORT_SELECTOR);\r\n  });\r\n  var parsedCount = 0, importCount = imports.length, newImports = [], errorImports = [];\r\n  function checkDone() {\r\n    if (parsedCount == importCount && callback) {\r\n      // If there is a script with src, wait for its load. Use a RAF which\r\n      // will trigger after that script is done. Handles the case of deferred/async\r\n      // scripts.\r\n      // TODO(valdrin) verify if works with slow resources.\r\n      var scripts = doc.querySelectorAll(IMPORT_SELECTOR + ' script[src]');\r\n      if (scripts.length) {\r\n        window.requestAnimationFrame(function() {\r\n          callback({\r\n            allImports: imports,\r\n            loadedImports: newImports,\r\n            errorImports: errorImports\r\n          });\r\n        });\r\n      } else {\r\n        callback({\r\n          allImports: imports,\r\n          loadedImports: newImports,\r\n          errorImports: errorImports\r\n        });\r\n      }\r\n    }\r\n  }\r\n  function loadedImport(e) {\r\n    markTargetLoaded(e);\r\n    newImports.push(this);\r\n    parsedCount++;\r\n    checkDone();\r\n  }\r\n  function errorLoadingImport(e) {\r\n    errorImports.push(this);\r\n    parsedCount++;\r\n    checkDone();\r\n  }\r\n  if (importCount) {\r\n    for (var i=0, imp; i<importCount && (imp=imports[i]); i++) {\r\n      if (isImportLoaded(imp)) {\r\n        newImports.push(this);\r\n        parsedCount++;\r\n        checkDone();\r\n      } else {\r\n        imp.addEventListener('load', loadedImport);\r\n        imp.addEventListener('error', errorLoadingImport);\r\n      }\r\n    }\r\n  } else {\r\n    checkDone();\r\n  }\r\n}\r\n\r\nfunction isImportLoaded(link) {\r\n  return useNative ? link.__loaded ||\r\n      (link.import && link.import.readyState !== 'loading') :\r\n      link.__loaded;\r\n}\r\n\r\n// make `whenReady` work with native HTMLImports\r\nif (useNative) {\r\n  new MutationObserver(function(mxns) {\r\n    for (var i=0, l=mxns.length, m; (i < l) && (m=mxns[i]); i++) {\r\n      if (m.addedNodes) {\r\n        handleImports(m.addedNodes);\r\n      }\r\n    }\r\n  }).observe(document.head, {childList: true});\r\n\r\n  function handleImports(nodes) {\r\n    for (var i=0, l=nodes.length, n; (i<l) && (n=nodes[i]); i++) {\r\n      if (isImport(n)) {\r\n        handleImport(n);\r\n      }\r\n    }\r\n  }\r\n\r\n  function isImport(element) {\r\n    return element.localName === 'link' && element.rel === 'import';\r\n  }\r\n\r\n  function handleImport(element) {\r\n    var loaded = element.import;\r\n    if (loaded) {\r\n      markTargetLoaded({target: element});\r\n    } else {\r\n      element.addEventListener('load', markTargetLoaded);\r\n      element.addEventListener('error', markTargetLoaded);\r\n    }\r\n  }\r\n\r\n  // make sure to catch any imports that are in the process of loading\r\n  // when this script is run.\r\n  (function() {\r\n    if (document.readyState === 'loading') {\r\n      var imports = document.querySelectorAll('link[rel=import]');\r\n      for (var i=0, l=imports.length, imp; (i<l) && (imp=imports[i]); i++) {\r\n        handleImport(imp);\r\n      }\r\n    }\r\n  })();\r\n\r\n}\r\n\r\n// Fire the 'HTMLImportsLoaded' event when imports in document at load time\r\n// have loaded. This event is required to simulate the script blocking\r\n// behavior of native imports. A main document script that needs to be sure\r\n// imports have loaded should wait for this event.\r\nwhenReady(function(detail) {\r\n  scope.ready = true;\r\n  scope.readyTime = new Date().getTime();\r\n  var evt = rootDocument.createEvent(\"CustomEvent\");\r\n  evt.initCustomEvent(\"HTMLImportsLoaded\", true, true, detail);\r\n  rootDocument.dispatchEvent(evt);\r\n});\r\n\r\n// Polyfill document.baseURI for browsers without it.\r\nif (!document.baseURI) {\r\n  var baseURIDescriptor = {\r\n    get: function() {\r\n      var base = document.querySelector('base');\r\n      return base ? base.href : window.location.href;\r\n    },\r\n    configurable: true\r\n  };\r\n\r\n  Object.defineProperty(document, 'baseURI', baseURIDescriptor);\r\n  Object.defineProperty(rootDocument, 'baseURI', baseURIDescriptor);\r\n}\r\n\r\nif (!useNative) {\r\n  function bootstrap() {\r\n    importer.bootDocument(document);\r\n  }\r\n\r\n  if (document.readyState === 'complete' ||\r\n      (document.readyState === 'interactive' && !window.attachEvent)) {\r\n    bootstrap();\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', bootstrap);\r\n  }\r\n}\r\n\r\n// exports\r\nscope.useNative = useNative;\r\nscope.whenReady = whenReady;\r\n// Needed for tests\r\n//TODO(valdrin) remove these, or make private.\r\nscope.importer = importer;\r\nscope.importLoader = importLoader;\r\n\r\n})(window.HTMLImports = (window.HTMLImports || {}));\r\n"]}